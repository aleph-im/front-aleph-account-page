"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[281],{38042:function(e,t,r){r.r(t),r.d(t,{SIWEController:function(){return b},W3mConnectingSiwe:function(){return eI},W3mConnectingSiweView:function(){return eO},createSIWEConfig:function(){return eB},formatMessage:function(){return a.wvx},getAddressFromMessage:function(){return c},getChainIdFromMessage:function(){return D},getDidAddress:function(){return a.NmC},getDidChainId:function(){return a.ZzI},verifySignature:function(){return d}});var i,n=r(48207),s=r(56055);let u={FIVE_MINUTES_IN_MS:3e5};class o{constructor(e){let{enabled:t=!0,nonceRefetchIntervalMs:r=u.FIVE_MINUTES_IN_MS,sessionRefetchIntervalMs:i=u.FIVE_MINUTES_IN_MS,signOutOnAccountChange:n=!0,signOutOnDisconnect:s=!0,signOutOnNetworkChange:o=!0,...a}=e;this.options={enabled:t,nonceRefetchIntervalMs:r,sessionRefetchIntervalMs:i,signOutOnDisconnect:s,signOutOnAccountChange:n,signOutOnNetworkChange:o},this.methods=a}async getNonce(e){let t=await this.methods.getNonce(e);if(!t)throw Error("siweControllerClient:getNonce - nonce is undefined");return t}async getMessageParams(){let e=await this.methods.getMessageParams();return e||{}}createMessage(e){let t=this.methods.createMessage(e);if(!t)throw Error("siweControllerClient:createMessage - message is undefined");return t}async verifyMessage(e){let t=await this.methods.verifyMessage(e);return t}async getSession(){let e=await this.methods.getSession();if(!e)throw Error("siweControllerClient:getSession - session is undefined");return e}async signIn(){let{address:e}=n.Ni.state,t=await this.methods.getNonce(e);if(!e)throw Error("An address is required to create a SIWE message.");let r=s.p1.caipNetworkIdToNumber(n.fB.state.caipNetwork?.id);if(!r)throw Error("A chainId is required to create a SIWE message.");let i=await this.getMessageParams(),u=this.methods.createMessage({address:`eip155:${r}:${e}`,chainId:r,nonce:t,version:"1",...i}),o=n.MO.getConnectedConnector();"AUTH"===o&&n.Pc.pushTransactionStack({view:null,goBack:!1,replace:!0,onCancel(){n.Pc.replace("ConnectingSiwe")}});let a=await n.lZ.signMessage(u),h=await this.methods.verifyMessage({message:u,signature:a});if(!h)throw Error("Error verifying SIWE signature");let l=await this.methods.getSession();if(!l)throw Error("Error verifying SIWE signature");return this.methods.onSignIn&&this.methods.onSignIn(l),n._4.navigateAfterNetworkSwitch(),l}async signOut(){return this.methods.onSignOut?.(),this.methods.signOut()}}var a=r(16637);let h=/0x[a-fA-F0-9]{40}/u,l=/Chain ID: (?<temp1>\d+)/u;function c(e){return e.match(h)?.[0]||""}function D(e){return`eip155:${e.match(l)?.[1]||1}`}async function d({address:e,message:t,signature:r,chainId:i,projectId:n}){let s=(0,a.fJv)(e,t,r);return s||(s=await (0,a.V3z)(e,t,r,i,n)),s}var p=r(73932),f=r(17832);let g=(0,f.sj)({status:"uninitialized"}),b={state:g,subscribeKey:(e,t)=>(0,p.VW)(g,e,t),subscribe:e=>(0,f.Ld)(g,()=>e(g)),_getClient(){if(!g._client)throw Error("SIWEController client not set");return g._client},async getNonce(e){let t=this._getClient(),r=await t.getNonce(e);return this.setNonce(r),r},async getSession(){try{let e=this._getClient(),t=await e.getSession();return t&&(this.setSession(t),this.setStatus("success")),t}catch{return}},createMessage(e){let t=this._getClient(),r=t.createMessage(e);return this.setMessage(r),r},async verifyMessage(e){let t=this._getClient(),r=await t.verifyMessage(e);return r},async signIn(){let e=this._getClient(),t=await e.signIn();return t},async signOut(){let e=this._getClient();await e.signOut(),this.setStatus("ready"),this.setSession(void 0),e.onSignOut?.()},onSignIn(e){let t=this._getClient();t.onSignIn?.(e)},onSignOut(){let e=this._getClient();e.onSignOut?.()},setSIWEClient(e){g._client=(0,f.iH)(e),g.status="ready",n.hD.setIsSiweEnabled(e.options.enabled)},setNonce(e){g.nonce=e},setStatus(e){g.status=e},setMessage(e){g.message=e},setSession(e){g.session=e,g.status=e?"success":"ready"}};var E=r(76962);/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let C=globalThis,y=C.ShadowRoot&&(void 0===C.ShadyCSS||C.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,m=Symbol(),w=new WeakMap;class A{constructor(e,t,r){if(this._$cssResult$=!0,r!==m)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(y&&void 0===e){let r=void 0!==t&&1===t.length;r&&(e=w.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&w.set(t,e))}return e}toString(){return this.cssText}}let v=e=>new A("string"==typeof e?e:e+"",void 0,m),$=(e,...t)=>{let r=1===e.length?e[0]:t.reduce((t,r,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[i+1],e[0]);return new A(r,e,m)},_=(e,t)=>{if(y)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(let r of t){let t=document.createElement("style"),i=C.litNonce;void 0!==i&&t.setAttribute("nonce",i),t.textContent=r.cssText,e.appendChild(t)}},S=y?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(let r of e.cssRules)t+=r.cssText;return v(t)})(e):e,{is:x,defineProperty:U,getOwnPropertyDescriptor:P,getOwnPropertyNames:I,getOwnPropertySymbols:N,getPrototypeOf:F}=Object,T=globalThis,M=T.trustedTypes,O=M?M.emptyScript:"",B=T.reactiveElementPolyfillSupport,R=(e,t)=>e,k={toAttribute(e,t){switch(t){case Boolean:e=e?O:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},H=(e,t)=>!x(e,t),j={attribute:!0,type:String,converter:k,reflect:!1,hasChanged:H};Symbol.metadata??=Symbol("metadata"),T.litPropertyMetadata??=new WeakMap;class z extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=j){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){let r=Symbol(),i=this.getPropertyDescriptor(e,r,t);void 0!==i&&U(this.prototype,e,i)}}static getPropertyDescriptor(e,t,r){let{get:i,set:n}=P(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return i?.call(this)},set(t){let s=i?.call(this);n.call(this,t),this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??j}static _$Ei(){if(this.hasOwnProperty(R("elementProperties")))return;let e=F(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(R("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(R("properties"))){let e=this.properties,t=[...I(e),...N(e)];for(let r of t)this.createProperty(r,e[r])}let e=this[Symbol.metadata];if(null!==e){let t=litPropertyMetadata.get(e);if(void 0!==t)for(let[e,r]of t)this.elementProperties.set(e,r)}for(let[e,t]of(this._$Eh=new Map,this.elementProperties)){let r=this._$Eu(e,t);void 0!==r&&this._$Eh.set(r,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let t=[];if(Array.isArray(e)){let r=new Set(e.flat(1/0).reverse());for(let e of r)t.unshift(S(e))}else void 0!==e&&t.push(S(e));return t}static _$Eu(e,t){let r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map,t=this.constructor.elementProperties;for(let r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return _(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$EC(e,t){let r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(void 0!==i&&!0===r.reflect){let n=(void 0!==r.converter?.toAttribute?r.converter:k).toAttribute(t,r.type);this._$Em=e,null==n?this.removeAttribute(i):this.setAttribute(i,n),this._$Em=null}}_$AK(e,t){let r=this.constructor,i=r._$Eh.get(e);if(void 0!==i&&this._$Em!==i){let e=r.getPropertyOptions(i),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:k;this._$Em=i,this[i]=n.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,r){if(void 0!==e){if(!((r??=this.constructor.getPropertyOptions(e)).hasChanged??H)(this[e],t))return;this.P(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(e,t,r){this._$AL.has(e)||this._$AL.set(e,t),!0===r.reflect&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}let e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}let e=this.constructor.elementProperties;if(e.size>0)for(let[t,r]of e)!0!==r.wrapped||this._$AL.has(t)||void 0===this[t]||this.P(t,this[t],r)}let e=!1,t=this._$AL;try{(e=this.shouldUpdate(t))?(this.willUpdate(t),this._$EO?.forEach(e=>e.hostUpdate?.()),this.update(t)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach(e=>this._$EC(e,this[e])),this._$EU()}updated(e){}firstUpdated(e){}}z.elementStyles=[],z.shadowRootOptions={mode:"open"},z[R("elementProperties")]=new Map,z[R("finalized")]=new Map,B?.({ReactiveElement:z}),(T.reactiveElementVersions??=[]).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let L=globalThis,V=L.trustedTypes,W=V?V.createPolicy("lit-html",{createHTML:e=>e}):void 0,q="$lit$",J=`lit$${Math.random().toFixed(9).slice(2)}$`,K="?"+J,Z=`<${K}>`,X=document,G=()=>X.createComment(""),Q=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Y=Array.isArray,ee=e=>Y(e)||"function"==typeof e?.[Symbol.iterator],et="[ 	\n\f\r]",er=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ei=/-->/g,en=/>/g,es=RegExp(`>|${et}(?:([^\\s"'>=/]+)(${et}*=${et}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),eu=/'/g,eo=/"/g,ea=/^(?:script|style|textarea|title)$/i,eh=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),el=eh(1),ec=(eh(2),Symbol.for("lit-noChange")),eD=Symbol.for("lit-nothing"),ed=new WeakMap,ep=X.createTreeWalker(X,129);function ef(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==W?W.createHTML(t):t}let eg=(e,t)=>{let r=e.length-1,i=[],n,s=2===t?"<svg>":"",u=er;for(let t=0;t<r;t++){let r=e[t],o,a,h=-1,l=0;for(;l<r.length&&(u.lastIndex=l,null!==(a=u.exec(r)));)l=u.lastIndex,u===er?"!--"===a[1]?u=ei:void 0!==a[1]?u=en:void 0!==a[2]?(ea.test(a[2])&&(n=RegExp("</"+a[2],"g")),u=es):void 0!==a[3]&&(u=es):u===es?">"===a[0]?(u=n??er,h=-1):void 0===a[1]?h=-2:(h=u.lastIndex-a[2].length,o=a[1],u=void 0===a[3]?es:'"'===a[3]?eo:eu):u===eo||u===eu?u=es:u===ei||u===en?u=er:(u=es,n=void 0);let c=u===es&&e[t+1].startsWith("/>")?" ":"";s+=u===er?r+Z:h>=0?(i.push(o),r.slice(0,h)+q+r.slice(h)+J+c):r+J+(-2===h?t:c)}return[ef(e,s+(e[r]||"<?>")+(2===t?"</svg>":"")),i]};class eb{constructor({strings:e,_$litType$:t},r){let i;this.parts=[];let n=0,s=0,u=e.length-1,o=this.parts,[a,h]=eg(e,t);if(this.el=eb.createElement(a,r),ep.currentNode=this.el.content,2===t){let e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(i=ep.nextNode())&&o.length<u;){if(1===i.nodeType){if(i.hasAttributes())for(let e of i.getAttributeNames())if(e.endsWith(q)){let t=h[s++],r=i.getAttribute(e).split(J),u=/([.?@])?(.*)/.exec(t);o.push({type:1,index:n,name:u[2],strings:r,ctor:"."===u[1]?ew:"?"===u[1]?eA:"@"===u[1]?ev:em}),i.removeAttribute(e)}else e.startsWith(J)&&(o.push({type:6,index:n}),i.removeAttribute(e));if(ea.test(i.tagName)){let e=i.textContent.split(J),t=e.length-1;if(t>0){i.textContent=V?V.emptyScript:"";for(let r=0;r<t;r++)i.append(e[r],G()),ep.nextNode(),o.push({type:2,index:++n});i.append(e[t],G())}}}else if(8===i.nodeType){if(i.data===K)o.push({type:2,index:n});else{let e=-1;for(;-1!==(e=i.data.indexOf(J,e+1));)o.push({type:7,index:n}),e+=J.length-1}}n++}}static createElement(e,t){let r=X.createElement("template");return r.innerHTML=e,r}}function eE(e,t,r=e,i){if(t===ec)return t;let n=void 0!==i?r._$Co?.[i]:r._$Cl,s=Q(t)?void 0:t._$litDirective$;return n?.constructor!==s&&(n?._$AO?.(!1),void 0===s?n=void 0:(n=new s(e))._$AT(e,r,i),void 0!==i?(r._$Co??=[])[i]=n:r._$Cl=n),void 0!==n&&(t=eE(e,n._$AS(e,t.values),n,i)),t}class eC{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:t},parts:r}=this._$AD,i=(e?.creationScope??X).importNode(t,!0);ep.currentNode=i;let n=ep.nextNode(),s=0,u=0,o=r[0];for(;void 0!==o;){if(s===o.index){let t;2===o.type?t=new ey(n,n.nextSibling,this,e):1===o.type?t=new o.ctor(n,o.name,o.strings,this,e):6===o.type&&(t=new e$(n,this,e)),this._$AV.push(t),o=r[++u]}s!==o?.index&&(n=ep.nextNode(),s++)}return ep.currentNode=X,i}p(e){let t=0;for(let r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class ey{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,i){this.type=2,this._$AH=eD,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){Q(e=eE(this,e,t))?e===eD||null==e||""===e?(this._$AH!==eD&&this._$AR(),this._$AH=eD):e!==this._$AH&&e!==ec&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):ee(e)?this.k(e):this._(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}_(e){this._$AH!==eD&&Q(this._$AH)?this._$AA.nextSibling.data=e:this.T(X.createTextNode(e)),this._$AH=e}$(e){let{values:t,_$litType$:r}=e,i="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=eb.createElement(ef(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(t);else{let e=new eC(i,this),r=e.u(this.options);e.p(t),this.T(r),this._$AH=e}}_$AC(e){let t=ed.get(e.strings);return void 0===t&&ed.set(e.strings,t=new eb(e)),t}k(e){Y(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,r,i=0;for(let n of e)i===t.length?t.push(r=new ey(this.S(G()),this.S(G()),this,this.options)):r=t[i],r._$AI(n),i++;i<t.length&&(this._$AR(r&&r._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){let t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class em{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,i,n){this.type=1,this._$AH=eD,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=n,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=eD}_$AI(e,t=this,r,i){let n=this.strings,s=!1;if(void 0===n)(s=!Q(e=eE(this,e,t,0))||e!==this._$AH&&e!==ec)&&(this._$AH=e);else{let i,u;let o=e;for(e=n[0],i=0;i<n.length-1;i++)(u=eE(this,o[r+i],t,i))===ec&&(u=this._$AH[i]),s||=!Q(u)||u!==this._$AH[i],u===eD?e=eD:e!==eD&&(e+=(u??"")+n[i+1]),this._$AH[i]=u}s&&!i&&this.j(e)}j(e){e===eD?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ew extends em{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===eD?void 0:e}}class eA extends em{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==eD)}}class ev extends em{constructor(e,t,r,i,n){super(e,t,r,i,n),this.type=5}_$AI(e,t=this){if((e=eE(this,e,t,0)??eD)===ec)return;let r=this._$AH,i=e===eD&&r!==eD||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==eD&&(r===eD||i);i&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class e${constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){eE(this,e)}}let e_=L.litHtmlPolyfillSupport;e_?.(eb,ey),(L.litHtmlVersions??=[]).push("3.1.3");let eS=(e,t,r)=>{let i=r?.renderBefore??t,n=i._$litPart$;if(void 0===n){let e=r?.renderBefore??null;i._$litPart$=n=new ey(t.insertBefore(G(),e),e,void 0,r??{})}return n._$AI(e),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class ex extends z{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=eS(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return ec}}ex._$litElement$=!0,ex.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:ex});let eU=globalThis.litElementPolyfillSupport;eU?.({LitElement:ex}),(globalThis.litElementVersions??=[]).push("4.0.5");var eP=$`
  :host {
    display: flex;
    justify-content: center;
    gap: var(--wui-spacing-2xl);
  }

  wui-visual-thumbnail:nth-child(1) {
    z-index: 1;
  }
`;let eI=class extends ex{constructor(){super(...arguments),this.dappImageUrl=n.hD.state.metadata?.icons,this.walletImageUrl=n.MO.getConnectedWalletImageUrl()}firstUpdated(){let e=this.shadowRoot?.querySelectorAll("wui-visual-thumbnail");e?.[0]&&this.createAnimation(e[0],"translate(18px)"),e?.[1]&&this.createAnimation(e[1],"translate(-18px)")}render(){return el`
      <wui-visual-thumbnail
        ?borderRadiusFull=${!0}
        .imageSrc=${this.dappImageUrl?.[0]}
      ></wui-visual-thumbnail>
      <wui-visual-thumbnail .imageSrc=${this.walletImageUrl}></wui-visual-thumbnail>
    `}createAnimation(e,t){e.animate([{transform:"translateX(0px)"},{transform:t}],{duration:1600,easing:"cubic-bezier(0.56, 0, 0.48, 1)",direction:"alternate",iterations:1/0})}};eI.styles=eP,eI=function(e,t,r,i){var n,s=arguments.length,u=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(u=(s<3?n(u):s>3?n(t,r,u):n(t,r))||u);return s>3&&u&&Object.defineProperty(t,r,u),u}([(0,E.customElement)("w3m-connecting-siwe")],eI);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let eN={attribute:!0,type:String,converter:k,reflect:!1,hasChanged:H},eF=(e=eN,t,r)=>{let{kind:i,metadata:n}=r,s=globalThis.litPropertyMetadata.get(n);if(void 0===s&&globalThis.litPropertyMetadata.set(n,s=new Map),s.set(r.name,e),"accessor"===i){let{name:i}=r;return{set(r){let n=t.get.call(this);t.set.call(this,r),this.requestUpdate(i,n,e)},init(t){return void 0!==t&&this.P(i,void 0,e),t}}}if("setter"===i){let{name:i}=r;return function(r){let n=this[i];t.call(this,r),this.requestUpdate(i,n,e)}}throw Error("Unsupported decorator location: "+i)};var eT=r(23781),eM=function(e,t,r,i){var n,s=arguments.length,u=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(u=(s<3?n(u):s>3?n(t,r,u):n(t,r))||u);return s>3&&u&&Object.defineProperty(t,r,u),u};let eO=class extends ex{constructor(){super(...arguments),this.dappName=n.hD.state.metadata?.name,this.isSigning=!1}render(){return this.onRender(),el`
      <wui-flex justifyContent="center" .padding=${["2xl","0","xxl","0"]}>
        <w3m-connecting-siwe></w3m-connecting-siwe>
      </wui-flex>
      <wui-flex
        .padding=${["0","4xl","l","4xl"]}
        gap="s"
        justifyContent="space-between"
      >
        <wui-text variant="paragraph-500" align="center" color="fg-100"
          >${this.dappName??"Dapp"} needs to connect to your wallet</wui-text
        >
      </wui-flex>
      <wui-flex
        .padding=${["0","3xl","l","3xl"]}
        gap="s"
        justifyContent="space-between"
      >
        <wui-text variant="small-400" align="center" color="fg-200"
          >Sign this message to prove you own this wallet and proceed. Canceling will disconnect
          you.</wui-text
        >
      </wui-flex>
      <wui-flex .padding=${["l","xl","xl","xl"]} gap="s" justifyContent="space-between">
        <wui-button
          size="md"
          ?fullwidth=${!0}
          variant="shade"
          @click=${this.onCancel.bind(this)}
          data-testid="w3m-connecting-siwe-cancel"
        >
          Cancel
        </wui-button>
        <wui-button
          size="md"
          ?fullwidth=${!0}
          variant="fill"
          @click=${this.onSign.bind(this)}
          ?loading=${this.isSigning}
          data-testid="w3m-connecting-siwe-sign"
        >
          ${this.isSigning?"Signing...":"Sign"}
        </wui-button>
      </wui-flex>
    `}onRender(){b.state.session&&n.IN.close()}async onSign(){this.isSigning=!0,n.Xs.sendEvent({event:"CLICK_SIGN_SIWE_MESSAGE",type:"track"});try{b.setStatus("loading");let e=await b.signIn();return b.setStatus("success"),n.Xs.sendEvent({event:"SIWE_AUTH_SUCCESS",type:"track"}),e}catch(t){let e=n.Ni.state.preferredAccountType;return e===eT.y_.ACCOUNT_TYPES.SMART_ACCOUNT?n.KC.showError("This application might not support Smart Accounts"):n.KC.showError("Signature declined"),b.setStatus("error"),n.Xs.sendEvent({event:"SIWE_AUTH_ERROR",type:"track"})}finally{this.isSigning=!1}}async onCancel(){let{isConnected:e}=n.Ni.state;e?(await n.lZ.disconnect(),n.IN.close()):n.Pc.push("Connect"),n.Xs.sendEvent({event:"CLICK_CANCEL_SIWE",type:"track"})}};function eB(e){return new o(e)}eM([(i={state:!0,attribute:!1},(e,t)=>"object"==typeof t?eF(i,e,t):((e,t,r)=>{let i=t.hasOwnProperty(r);return t.constructor.createProperty(r,i?{...e,wrapped:!0}:e),i?Object.getOwnPropertyDescriptor(t,r):void 0})(i,e,t))],eO.prototype,"isSigning",void 0),eO=eM([(0,E.customElement)("w3m-connecting-siwe-view")],eO)},68081:function(e,t,r){var i={};r.r(i),r.d(i,{identity:function(){return I}});var n={};r.r(n),r.d(n,{base2:function(){return N}});var s={};r.r(s),r.d(s,{base8:function(){return F}});var u={};r.r(u),r.d(u,{base10:function(){return T}});var o={};r.r(o),r.d(o,{base16:function(){return M},base16upper:function(){return O}});var a={};r.r(a),r.d(a,{base32:function(){return B},base32hex:function(){return j},base32hexpad:function(){return L},base32hexpadupper:function(){return V},base32hexupper:function(){return z},base32pad:function(){return k},base32padupper:function(){return H},base32upper:function(){return R},base32z:function(){return W}});var h={};r.r(h),r.d(h,{base36:function(){return q},base36upper:function(){return J}});var l={};r.r(l),r.d(l,{base58btc:function(){return K},base58flickr:function(){return Z}});var c={};r.r(c),r.d(c,{base64:function(){return X},base64pad:function(){return G},base64url:function(){return Q},base64urlpad:function(){return Y}});var D={};r.r(D),r.d(D,{base256emoji:function(){return ei}});var d={};r.r(d),r.d(d,{sha256:function(){return ep},sha512:function(){return ef}});var p={};r.r(p),r.d(p,{identity:function(){return eb}});var f={};r.r(f),r.d(f,{code:function(){return eC},decode:function(){return em},encode:function(){return ey},name:function(){return eE}});var g={};r.r(g),r.d(g,{code:function(){return e$},decode:function(){return eS},encode:function(){return e_},name:function(){return ev}});var b=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),u=s.charCodeAt(0);if(255!==r[u])throw TypeError(s+" is ambiguous");r[u]=n}var o=e.length,a=e.charAt(0),h=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function c(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===a;)i++,t++;for(var s=(e.length-t)*h+1>>>0,u=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var c=0,D=s-1;(0!==l||c<n)&&-1!==D;D--,c++)l+=o*u[D]>>>0,u[D]=l%256>>>0,l=l/256>>>0;if(0!==l)throw Error("Non-zero carry");n=c,t++}if(" "!==e[t]){for(var d=s-n;d!==s&&0===u[d];)d++;for(var p=new Uint8Array(i+(s-d)),f=i;d!==s;)p[f++]=u[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var u=(s-n)*l+1>>>0,h=new Uint8Array(u);n!==s;){for(var c=t[n],D=0,d=u-1;(0!==c||D<i)&&-1!==d;d--,D++)c+=256*h[d]>>>0,h[d]=c%o>>>0,c=c/o>>>0;if(0!==c)throw Error("Non-zero carry");i=D,n++}for(var p=u-i;p!==u&&0===h[p];)p++;for(var f=a.repeat(r);p<u;++p)f+=e.charAt(h[p]);return f},decodeUnsafe:c,decode:function(e){var r=c(e);if(r)return r;throw Error(`Non-${t} character`)}}};new Uint8Array(0);let E=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},C=e=>new TextEncoder().encode(e),y=e=>new TextDecoder().decode(e);class m{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class w{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return v(this,e)}}class A{constructor(e){this.decoders=e}or(e){return v(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let v=(e,t)=>new A({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class ${constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new m(e,t,r),this.decoder=new w(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let _=({name:e,prefix:t,encode:r,decode:i})=>new $(e,t,r,i),S=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=b(r,t);return _({prefix:e,name:t,encode:i,decode:e=>E(n(e))})},x=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let u=new Uint8Array(s*r/8|0),o=0,a=0,h=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);a=a<<r|s,(o+=r)>=8&&(o-=8,u[h++]=255&a>>o)}if(o>=r||255&a<<8-o)throw SyntaxError("Unexpected end of data");return u},U=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",u=0,o=0;for(let i=0;i<e.length;++i)for(o=o<<8|e[i],u+=8;u>r;)u-=r,s+=t[n&o>>u];if(u&&(s+=t[n&o<<r-u]),i)for(;s.length*r&7;)s+="=";return s},P=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>_({prefix:t,name:e,encode:e=>U(e,i,r),decode:t=>x(t,i,r,e)}),I=_({prefix:"\x00",name:"identity",encode:e=>y(e),decode:e=>C(e)}),N=P({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),F=P({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),T=S({prefix:"9",name:"base10",alphabet:"0123456789"}),M=P({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),O=P({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),B=P({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),R=P({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),k=P({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),H=P({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),j=P({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),z=P({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),L=P({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),V=P({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),W=P({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),q=S({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),J=S({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),K=S({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Z=S({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),X=P({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),G=P({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Q=P({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Y=P({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ee=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),et=ee.reduce((e,t,r)=>(e[r]=t,e),[]),er=ee.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),ei=_({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=et[t],"")},decode:function(e){let t=[];for(let r of e){let e=er[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});function en(e,t,r){t=t||[];for(var i=r=r||0;e>=2147483648;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,en.bytes=r-i+1,t}function es(e,t){var r,i=0,t=t||0,n=0,s=t,u=e.length;do{if(s>=u)throw es.bytes=0,RangeError("Could not decode varint");r=e[s++],i+=n<28?(127&r)<<n:(127&r)*Math.pow(2,n),n+=7}while(r>=128);return es.bytes=s-t,i}var eu={encode:en,decode:es,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let eo=(e,t,r=0)=>(eu.encode(e,t,r),t),ea=e=>eu.encodingLength(e),eh=(e,t)=>{let r=t.byteLength,i=ea(e),n=i+ea(r),s=new Uint8Array(n+r);return eo(e,s,0),eo(r,s,i),s.set(t,n),new el(e,r,t,s)};class el{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let ec=({name:e,code:t,encode:r})=>new eD(e,t,r);class eD{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?eh(this.code,t):t.then(e=>eh(this.code,e))}throw Error("Unknown type, must be binary type")}}let ed=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),ep=ec({name:"sha2-256",code:18,encode:ed("SHA-256")}),ef=ec({name:"sha2-512",code:19,encode:ed("SHA-512")}),eg=e=>eh(0,E(e)),eb={code:0,name:"identity",encode:E,digest:eg},eE="raw",eC=85,ey=e=>E(e),em=e=>E(e),ew=new TextEncoder,eA=new TextDecoder,ev="json",e$=512,e_=e=>ew.encode(JSON.stringify(e)),eS=e=>JSON.parse(eA.decode(e));class ex{constructor(e,t,r,i){this.code=t,this.version=e,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:eB,byteLength:eB,code:eO,version:eO,multihash:eO,bytes:eO,_baseCache:eB,asCID:eB})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==eN)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==eF)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ex.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=Digest.create(e,t);return ex.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Digest.equals(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:i}=this;return 0===r?eP(t,i,e||base58btc.encoder):eI(t,i,e||base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return eR(/^0\.0/,ek),!!(e&&(e[eM]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof ex)return e;if(null!=e&&e.asCID===e){let{version:t,code:r,multihash:i,bytes:n}=e;return new ex(t,r,i,n||eT(t,r,i.bytes))}if(null==e||!0!==e[eM])return null;{let{version:t,multihash:r,code:i}=e,n=Digest.decode(r);return ex.create(t,i,n)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===eN)return new ex(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${eN}) block encoding`);case 1:{let i=eT(e,t,r.bytes);return new ex(e,t,r,i)}default:throw Error("Invalid version")}}static createV0(e){return ex.create(0,eN,e)}static createV1(e,t){return ex.create(1,e,t)}static decode(e){let[t,r]=ex.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=ex.inspectBytes(e),r=t.size-t.multihashSize,i=coerce(e.subarray(r,r+t.multihashSize));if(i.byteLength!==t.multihashSize)throw Error("Incorrect length");let n=i.subarray(t.multihashSize-t.digestSize),s=new Digest.Digest(t.multihashCode,t.digestSize,n,i),u=0===t.version?ex.createV0(s):ex.createV1(t.codec,s);return[u,e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,i]=varint.decode(e.subarray(t));return t+=i,r},i=r(),n=eN;if(18===i?(i=0,t=0):1===i&&(n=r()),0!==i&&1!==i)throw RangeError(`Invalid CID version ${i}`);let s=t,u=r(),o=r(),a=t+o;return{version:i,codec:n,multihashCode:u,digestSize:o,multihashSize:a-s,size:a}}static parse(e,t){let[r,i]=eU(e,t),n=ex.decode(i);return n._baseCache.set(r,e),n}}let eU=(e,t)=>{switch(e[0]){case"Q":{let r=t||base58btc;return[base58btc.prefix,r.decode(`${base58btc.prefix}${e}`)]}case base58btc.prefix:{let r=t||base58btc;return[base58btc.prefix,r.decode(e)]}case base32.prefix:{let r=t||base32;return[base32.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},eP=(e,t,r)=>{let{prefix:i}=r;if(i!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=t.get(i);if(null!=n)return n;{let n=r.encode(e).slice(1);return t.set(i,n),n}},eI=(e,t,r)=>{let{prefix:i}=r,n=t.get(i);if(null!=n)return n;{let n=r.encode(e);return t.set(i,n),n}},eN=112,eF=18,eT=(e,t,r)=>{let i=varint.encodingLength(e),n=i+varint.encodingLength(t),s=new Uint8Array(n+r.byteLength);return varint.encodeTo(e,s,0),varint.encodeTo(t,s,i),s.set(r,n),s},eM=Symbol.for("@ipld/js-cid/CID"),eO={writable:!1,configurable:!1,enumerable:!0},eB={writable:!1,enumerable:!1,configurable:!1},eR=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},ek=null,eH={...i,...n,...s,...u,...o,...a,...h,...l,...c,...D};function ej(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}ej("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>{let t=new TextEncoder;return t.encode(e.substring(1))}),ej("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=function(e=0){if(null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe){var t;return t=globalThis.Buffer.allocUnsafe(e),null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}return new Uint8Array(e)}(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),eH.base16}}]);