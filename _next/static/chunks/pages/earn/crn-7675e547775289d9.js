(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[828],{62640:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/earn/crn",function(){return n(38766)}])},58833:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(85893),a=n(19521),r=n(7251);let o=(0,a.ZP)(r.zx).attrs(e=>({...e,forwardedAs:"a",kind:"neon",variant:"text-only",color:"main0"})).withConfig({displayName:"styles__StyledExternalLinkButton",componentId:"sc-16jaolm-0"})([""]);function l(e){let{children:t,href:n,size:a="big",...r}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(o,{href:n,size:a,...r,target:"_blank",children:[t||n,(0,i.jsx)(s,{name:"square-up-right"})]})})}var s=(0,a.ZP)(r.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-mpznlq-0"})({marginLeft:"0.625rem"})},28417:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(85893),a=n(19521),r=n(67294),o=n(34816),l=n(43815),s=n(42983),c=n(13153),d=n(7251),m=n(63608);let p=(0,r.memo)(e=>{let{title:t,nodes:n}=e,s=(0,a.Fg)(),c=(0,r.useMemo)(()=>{let e=n||[],t=e.length,i=e.reduce((e,t)=>e+Number(t.score>=.8),0),a=e.reduce((e,t)=>e+Number(t.score>=.5&&t.score<.8),0),r=e.reduce((e,t)=>e+Number(t.score<.5),0),o=t-i-a-r;return[{label:"active nodes",value:"".concat(i," nodes"),percentage:i/t,color:"main1"},{label:"50% < 80%",value:"".concat(a," nodes"),percentage:a/t,color:"main2"},{label:"< 50%",value:"".concat(r," nodes"),percentage:r/t,color:"error"},{label:"other",value:"".concat(o," nodes"),percentage:o/t,color:"transparent"}]},[n]),d="".concat(s.color.base0,"20"),p=[...c].reverse();return(0,i.jsxs)(h,{loading:!n,children:[(0,i.jsx)(g,{forwardedAs:"h3",type:"info",color:"main0",children:t}),(0,i.jsxs)(x,{children:[(0,i.jsxs)(y,{width:100,height:100,margin:{},children:[(0,i.jsx)(o.b,{data:[{v:1}],dataKey:"v",stroke:"transparent",innerRadius:"72%",outerRadius:"100%",startAngle:450,endAngle:90,isAnimationActive:!1,fill:d}),(0,i.jsx)(o.b,{data:p,dataKey:"percentage",stroke:"transparent",innerRadius:"72%",outerRadius:"100%",startAngle:450,endAngle:90,children:p.map(e=>{let t=s.color[e.color]||e.color;return(0,i.jsx)(l.b,{fill:t},e.label)})}),(0,i.jsx)("text",{x:"50%",y:"50%",dominantBaseline:"central",textAnchor:"middle",className:"tp-body3 fs-24",fill:s.color.text,children:(null==n?void 0:n.length)||0})]}),(0,i.jsx)(f,{children:Array.from({length:2}).map((e,t)=>(0,i.jsx)(_,{children:c.slice(2*t,2*t+2).map(e=>(0,i.jsxs)(v,{children:[(0,i.jsx)(m.Z,{$color:"transparent"===e.color?d:e.color,$size:"1.25rem"}),(0,i.jsxs)(j,{className:"tp-body3",children:[(0,i.jsx)("div",{children:e.value}),(0,i.jsx)(N,{className:"fs-10",children:e.label})]})]},e.label))},t))})]})]})});p.displayName="NetworkHealthChart";var u=p,h=(0,a.ZP)(c.Z).withConfig({displayName:"cmp___StyledCard",componentId:"sc-ghx7oa-0"})({width:"auto",minWidth:"17.25rem"}),g=(0,a.ZP)(d.DU).withConfig({displayName:"cmp___StyledTextGradient",componentId:"sc-ghx7oa-1"})({margin:"0px",minHeight:"2rem"}),x=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-ghx7oa-2"})({display:"flex",flexDirection:"column",alignItems:"center"}),y=(0,a.ZP)(s.u).withConfig({displayName:"cmp___StyledPieChart",componentId:"sc-ghx7oa-3"})({marginTop:"0.75rem",marginBottom:"0.75rem",minHeight:"6.25rem"}),f=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-ghx7oa-4"})({zIndex:"1",marginTop:"0.25rem",display:"flex",width:"100%",alignItems:"stretch",justifyContent:"space-between",gap:"1rem"}),_=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-ghx7oa-5"})({display:"flex",flexDirection:"column",gap:"1rem"}),v=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-ghx7oa-6"})({display:"flex",alignItems:"center",gap:"0.75rem"}),j=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-ghx7oa-7"})({display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"0.25rem",whiteSpace:"nowrap",fontStyle:"normal",lineHeight:"1rem !important"}),N=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-ghx7oa-8"})({opacity:"0.6"})},58160:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var i=n(85893),a=n(19521),r=n(67294),o=n(63608);let l=(0,a.ZP)(o.Z).attrs(e=>{let{theme:t,$status:n,...i}=e,a=n>=.8?"main1":n>=.5?"main0":n>=0?"error":"".concat(t.color.base0,"20");return{$color:a,...i}}).withConfig({displayName:"styles__StyledVersionIcon",componentId:"sc-iae05r-0"})([""]);var s=n(64486),c=n(7251);let d=(0,r.memo)(e=>{var t;let{node:n,lastVersion:a}=e,o=(0,r.useMemo)(()=>new s.B,[]),d=(0,r.useMemo)(()=>a?o.isNodeUptodate(n,a)&&!o.isNodeExperimental(n,a)?1:o.isNodeOutdated(n,a)||o.isNodeExperimental(n,a)?.5:0:-1,[n,a,o]),m=(0,r.useMemo)(()=>a?o.isNodeLatest(n,a)?"latest":o.isNodePrerelease(n,a)?"prerelease":o.isNodeExperimental(n,a)?"experimental":o.isNodeOutdated(n,a)?"outdated":"obsolete":"",[n,a,o]),h=(0,i.jsxs)(p,{children:[(0,i.jsx)(l,{$status:d}),(null===(t=n.metricsData)||void 0===t?void 0:t.version)||"-"]});return(0,i.jsx)(i.Fragment,{children:d<1?(0,i.jsx)(c.u,{my:"top-center",at:"bottom-center",offset:{x:0,y:10},content:m,children:(0,i.jsxs)(u,{children:[h," ",(0,i.jsx)(c.JO,{name:"info-circle",size:"sm"})]})}):h})});d.displayName="VersionCell";var m=d,p=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-i7l1ld-0"})({display:"inline-flex",alignItems:"center",gap:"0.75rem",whiteSpace:"nowrap"}),u=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-i7l1ld-1"})({display:"inline-flex",alignItems:"center",gap:"0.5rem"})},38766:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ee}});var i=n(85893),a=n(19521),r=n(67294),o=n(9008),l=n.n(o),s=n(41664),c=n.n(s),d=n(7251),m=n(36470),p=n(64486),u=n(9700),h=n(65249),g=n(94527),x=n(68461),y=n(23187),f=n(88968),_=n(58160);let v=a.ZP.div.withConfig({displayName:"styles__StyledDotIcon",componentId:"sc-1dtglgs-0"})(e=>{let{theme:t,$active:n}=e,i=n?t.color.main1:"".concat(t.color.base0,"20");return[{height:"0.75rem",width:"0.5rem"},(0,a.iv)(["background-color:",";"],i)]}),j=(0,r.memo)(e=>{let{decentralization:t}=e,n=e=>(e+1)*.3;return(0,i.jsx)(N,{children:(0,i.jsx)(w,{children:Array.from({length:3}).map((e,a)=>(0,i.jsx)(v,{$active:t>=n(a)},a))})})});j.displayName="DecentralizedCell";var N=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-11kg7ah-0"})({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),w=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-11kg7ah-1"})({display:"flex",alignItems:"stretch",gap:"0.125rem"}),C=n(47630);let b=(0,r.memo)(e=>{let{node:t}=e,n=new C.S,a=n.CRNRewardsPerDay(t),o=(0,r.useMemo)(()=>!t.parent,[t]);return(0,i.jsx)(i.Fragment,{children:o?(0,i.jsx)(i.Fragment,{children:"-"}):(0,i.jsxs)(I,{children:[(0,i.jsxs)(S,{children:["~ ",a.toFixed(2)]}),(0,i.jsx)(d.TR,{text:"",color:"main0"})]})})});b.displayName="CRNRewardsCell";var I=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-yja46l-0"})({display:"inline-flex",alignItems:"center",gap:"0.5rem"}),S=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-yja46l-1"})({whiteSpace:"nowrap"});let Z=(0,r.memo)(e=>{let{nodes:t,filteredNodes:n,lastVersion:a}=e,o=(0,r.useMemo)(()=>[{label:"SCORE",sortable:!0,sortBy:e=>e.score,render:e=>(0,i.jsx)(f.Z,{score:e.score})},{label:"LINKED",sortable:!0,sortBy:e=>{var t;return null===(t=e.parentData)||void 0===t?void 0:t.name},render:e=>(0,i.jsx)(i.Fragment,{children:e.parentData?(0,i.jsx)(y.Z,{hash:e.parentData.hash,name:e.parentData.name,picture:e.parentData.picture}):"-"})},{label:"NAME",sortable:!0,sortBy:e=>e.name,render:e=>(0,i.jsx)(y.Z,{hash:e.hash,name:e.name,picture:e.picture})},{label:"DECENTRALIZED",sortable:!0,sortBy:e=>e.decentralization,render:e=>(0,i.jsx)(j,{decentralization:e.decentralization})},{label:"EST. REWARDS",align:"right",render:e=>(0,i.jsx)(b,{node:e})},{label:"VERSION",sortable:!0,align:"right",width:"100%",sortBy:e=>{var t;return null===(t=e.metricsData)||void 0===t?void 0:t.version},render:e=>(0,i.jsx)(_.Z,{node:e,nodes:t,lastVersion:a})}],[a,t]);return(0,i.jsx)(x.Z,{columns:o,data:n})});Z.displayName="ComputeResourceNodesTable";var D=n(58833),P=n(49869),R=n(33445),A=n(28417),k=n(13153),E=n(63608);let T=(0,r.memo)(e=>{let{title:t,nodes:n}=e,a=(0,r.useMemo)(()=>{let e=n||Array.from({length:4},(e,t)=>({metricsData:{as_name:"Provider ".concat(t)}})),t=e.reduce((e,t)=>{var n;let i=(null===(n=t.metricsData)||void 0===n?void 0:n.as_name)||"others";return e[i]=(e[i]||0)+1,e},{others:0}),i=Object.values(t).reduce((e,t)=>e+t,0),a=Object.entries(t).filter(e=>{let[t]=e;return"others"!==t}).sort((e,t)=>{let[,n]=e,[,i]=t;return i-n}),r=a.slice(0,3),o=a.slice(3),l=["others",t.others+o.reduce((e,t)=>{let[,n]=t;return e+n},0)];return[...r,l].map((e,t)=>{let[n,a]=e,r=a/i;return{label:"".concat(a," nodes (").concat((100*r).toFixed(0),"%)"),value:n,percentage:r,color:"others"===n?"main1":0===t?"error":1===t?"main2":"main0"}})},[n]);return(0,i.jsxs)(M,{loading:!n,children:[(0,i.jsx)(O,{forwardedAs:"h3",type:"info",color:"main0",children:t}),(0,i.jsx)(z,{children:a.map(e=>(0,i.jsxs)(B,{children:[(0,i.jsx)(E.Z,{$color:e.color,$size:"1.25rem"}),(0,i.jsxs)(H,{className:"tp-body3",children:[(0,i.jsx)("div",{children:e.value}),(0,i.jsx)(F,{className:"fs-10",children:e.label})]})]},e.value))})]})});T.displayName="HostingProviderChart";var M=(0,a.ZP)(k.Z).withConfig({displayName:"cmp___StyledCard",componentId:"sc-1c9rl6q-0"})({width:"auto",minWidth:"10.5625rem"}),O=(0,a.ZP)(d.DU).withConfig({displayName:"cmp___StyledTextGradient",componentId:"sc-1c9rl6q-1"})({margin:"0px",minHeight:"2rem"}),z=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1c9rl6q-2"})({zIndex:"1",marginTop:"0.25rem",display:"flex",flexDirection:"column",gap:"1rem"}),B=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1c9rl6q-3"})({display:"flex",alignItems:"center",gap:"0.75rem"}),H=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1c9rl6q-4"})({display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"0.25rem",whiteSpace:"nowrap",fontStyle:"normal",lineHeight:"1rem !important"}),F=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1c9rl6q-5"})({opacity:"0.6"}),L=n(63639);let q=(0,r.memo)(e=>{let{account:t,nodes:n,userNodes:a,filteredNodes:o,filteredUserNodes:s,tabs:x,selectedTab:y,filter:f,lastVersion:_,userRewards:v,lastDistribution:j,handleTabChange:N,handleFilterChange:w}=function(e){let[{account:t,accountBalance:n=0}]=(0,m.mr)(),a=(0,r.useMemo)(()=>new p.B(t),[t]),{nodes:o,filteredNodes:l,...s}=function(e){let{nodes:t}=e,[{account:n,accountBalance:i=0}]=(0,m.mr)(),a=(0,r.useMemo)(()=>new p.B(n),[n]),o=(0,r.useCallback)(()=>a.getCRNNodes(),[a]),[l,s]=(0,r.useState)(Date.now()),c=(0,d.$P)(l,1e4),{data:h}=(0,u.Q)({doRequest:o,triggerOnMount:!0,triggerDeps:[c],onSuccess:()=>null}),g=(0,r.useCallback)(()=>a.getLatestCRNVersion(),[a]),{data:x}=(0,u.Q)({doRequest:g,triggerOnMount:!0,onSuccess:()=>null,onError:()=>null}),[y,f]=(0,r.useState)(""),_=(0,d.$P)(y,200),v=(0,r.useCallback)(e=>{let t=e.target.value;f(t)},[]),j=(0,r.useCallback)((e,t)=>{if(t)return e?t.filter(t=>{var n;return t.name.toLowerCase().includes(e.toLowerCase())||((null===(n=t.parentData)||void 0===n?void 0:n.name)||"").toLowerCase().includes(e.toLowerCase())}):t},[]),N=(0,r.useMemo)(()=>{let e=t||h;if(e)return e.sort((e,t)=>t.score-e.score)},[t,h]),w=(0,r.useMemo)(()=>j(_,N),[j,_,N]);return{account:n,accountBalance:i,nodes:N,filteredNodes:w,filter:y,lastVersion:x,handleFilterChange:v,setLastUpdate:s}}(e),c=(0,r.useCallback)(e=>{if(e)return e.filter(e=>a.isUserNode(e))},[a]),x=(0,r.useMemo)(()=>c(o),[c,o]),y=(0,r.useMemo)(()=>c(l),[c,l]),{nodesIssues:f,warningFlag:_}=(0,h.h)({nodes:x}),[v,j]=(0,r.useState)("user"),N=(null==x?void 0:x.length)?v:"nodes",w=(0,r.useMemo)(()=>{let e=[{id:"user",name:"My compute nodes",disabled:!(null==x?void 0:x.length),label:_?{label:(0,i.jsx)(d.Cc,{children:_}),position:"top"}:void 0},{id:"nodes",name:"All compute nodes"}];return e},[x,_]),{lastRewardsCalculation:C,lastRewardsDistribution:b}=(0,g._k)(),I=(0,r.useMemo)(()=>C?null==x?void 0:x.reduce((e,t)=>e+(C.rewards[t.reward]||0),0):void 0,[C,x]),S=null==b?void 0:b.timestamp;return{account:t,accountBalance:n,nodes:o,filteredNodes:l,userNodes:x,filteredUserNodes:y,selectedTab:N,tabs:w,userRewards:I,lastDistribution:S,nodesIssues:f,...s,handleTabChange:j}}(e),C=(0,i.jsx)(c(),{href:"/earn/crn/new",passHref:!0,legacyBehavior:!0,children:(0,i.jsxs)($,{color:"main0",kind:"neon",variant:"secondary",size:"regular",children:[(0,i.jsx)(d.JO,{name:"key"}),"Create compute node"]})});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l(),{children:[(0,i.jsx)("title",{children:"Aleph.im | Account"}),(0,i.jsx)("meta",{name:"description",content:"Aleph.im Account Dashboard"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,i.jsx)("section",{children:(0,i.jsx)(W,{className:"tp-h5",children:"Compute nodes"})}),(0,i.jsx)("section",{children:(0,i.jsx)(P.Z,{buttons:C,children:(0,i.jsxs)(V,{children:[(0,i.jsxs)(G,{children:[(0,i.jsx)(A.Z,{nodes:n,title:"CRN NETWORK HEALTH"}),(0,i.jsx)(T,{nodes:n,title:"TOP HOSTING PROVIDER"}),(0,i.jsx)(L.Z,{title:"CRN REWARDS",calculatedRewards:v,distributionTimestamp:j,disabled:!t||!(null==a?void 0:a.length)})]}),(0,i.jsxs)(J,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(K,{className:"tp-h7",children:"What is a compute node?"}),(0,i.jsx)("p",{className:"fs-12",children:"Anyone can set up a Compute Resource Node (CRN) to contribute to our decentralized network. These nodes play a crucial role in our ecosystem, enabling various services. While no commitment is needed to establish a CRN, to unlock a minimum wage for your CRN, it needs the endorsement of a Core Channel Node (CCN). A CCN operator can vouch for up to three CRNs, ensuring fair and balanced participation."}),(0,i.jsx)(D.Z,{href:"https://docs.aleph.im/nodes/compute/",size:"regular",children:"Node Setup Guide"})]}),(0,i.jsx)(U,{children:C})]})]})})}),(0,i.jsxs)(Q,{children:[(0,i.jsxs)(X,{children:[(0,i.jsx)(d.mQ,{tabs:x,align:"left",selected:y,onTabChange:N}),(0,i.jsx)(d.oi,{value:f,name:"filter-ccn",placeholder:"Search me",onChange:w,icon:(0,i.jsx)(d.JO,{name:"search"})})]}),(0,i.jsxs)(Y,{children:[(0,i.jsx)(R.Z,{show:!n}),n&&o&&s&&(0,i.jsx)(i.Fragment,{children:"user"===y?(0,i.jsx)(Z,{nodes:n,filteredNodes:s,lastVersion:_}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(Z,{nodes:n,filteredNodes:o,lastVersion:_})})})]})]})]})});q.displayName="ComputeResourceNodesPage";var $=(0,a.ZP)(d.zx).withConfig({displayName:"cmp___StyledButton",componentId:"sc-1m9xt13-0"})({gap:"0.625rem"}),W=(0,a.ZP)("h1").withConfig({displayName:"cmp___StyledH",componentId:"sc-1m9xt13-1"})({marginBottom:"2rem"}),V=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1m9xt13-2"})({display:"flex",alignItems:"flex-start",gap:"1.5rem"}),G=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1m9xt13-3"})({display:"flex",alignItems:"stretch",gap:"1.5rem"}),J=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1m9xt13-4"})({display:"flex",flex:"1 1 auto",flexDirection:"column",justifyContent:"space-between",alignSelf:"stretch"}),K=(0,a.ZP)("h1").withConfig({displayName:"cmp___StyledH2",componentId:"sc-1m9xt13-5"})({marginBottom:"0px"}),U=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1m9xt13-6"})({marginTop:"1.5rem"}),Q=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1m9xt13-7"})({marginTop:"3.5rem"}),X=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1m9xt13-8"})({marginBottom:"2rem",display:"flex",alignItems:"flex-end",justifyContent:"space-between"}),Y=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-1m9xt13-9"})({position:"relative"}),ee=q}},function(e){e.O(0,[261,705,774,888,179],function(){return e(e.s=62640)}),_N_E=e.O()}]);