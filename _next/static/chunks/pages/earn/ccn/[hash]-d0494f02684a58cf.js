(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{18952:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/earn/ccn/[hash]",function(){return n(18743)}])},87931:function(e,i,n){"use strict";n.d(i,{Z:function(){return d}});var a=n(85893),l=n(41664),r=n.n(l),t=n(7251);function d(e){let{href:i,variant:n,color:l,kind:d,size:s,children:o}=e;return(0,a.jsx)(r(),{href:i,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(t.zx,{as:"a",variant:n||"secondary",color:l||"main0",kind:d||"neon",size:s||"regular",children:o})})}},52984:function(e,i,n){"use strict";n.d(i,{Z:function(){return r}});var a=n(19521);let l=a.ZP.div.withConfig({displayName:"styles__StyledProgressBar",componentId:"sc-lav9ln-0"})(e=>{var i;let{theme:n,$color:l="main0",$gradient:r,$percent:t}=e,d=r?null===(i=n.gradient[r])||void 0===i?void 0:i.fn:void 0,s=d||n.color[l]||l,o="".concat(n.color.base0,"20");return[{position:"relative",height:"0.125rem",width:"100%"},(0,a.iv)(["background-color:",";&:after{"," content:'';background-color:",";width:","%;}"],o,{position:"absolute",left:"0px",top:"0px",height:"100%"},s,100*t)]});var r=l},90709:function(e,i,n){"use strict";n.d(i,{Z:function(){return s}});var a=n(85893),l=n(19521),r=n(67294);let t=l.ZP.div.withConfig({displayName:"styles__StyledDotIcon",componentId:"sc-q6l3ug-0"})(e=>{let{theme:i,$score:n}=e,a=void 0===n?"".concat(i.color.base0,"20"):n>=.8?i.color.main1:n>=.5?i.color.main0:i.color.error;return[{height:"0.75rem",width:"0.5rem"},(0,l.iv)(["background-color:",";"],a)]}),d=(0,r.memo)(e=>{let{nodes:i,subfix:n,max:l=3,...r}=e;return(0,a.jsxs)(o,{...r,children:[(0,a.jsx)(c,{children:Array.from({length:l},(e,n)=>{var l;return(0,a.jsx)(t,{$score:null==i?void 0:null===(l=i[n])||void 0===l?void 0:l.score},n)})}),(0,a.jsxs)(u,{className:"fs-10",children:[null==i?void 0:i.length," ",(0,a.jsxs)(m,{children:["of ",l,n]})]})]})});d.displayName="NodeLinkedNodes";var s=d,o=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1i7lvnr-0"})({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),c=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1i7lvnr-1"})({display:"flex",alignItems:"stretch",gap:"0.125rem"}),u=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1i7lvnr-2"})({whiteSpace:"nowrap",lineHeight:"1rem"}),m=(0,l.ZP)("span").withConfig({displayName:"cmp___StyledSpan",componentId:"sc-1i7lvnr-3"})({opacity:"0.2"})},18743:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return V}});var a=n(85893),l=n(19521),r=n(67294),t=n(9008),d=n.n(t),s=n(1218),o=n(94461),c=n(48107),u=n(11163),m=n(94527),h=n(15457),v=n(10159),g=n(87536),N=n(56312),j=n(7251),x=n(91077),p=n(39229),f=n(68732),y=n(52984),I=n(90709),C=n(71806),D=n(41664),M=n.n(D),w=n(34853),_=n(87931);let A=(0,l.ZP)(j.rs).withConfig({displayName:"styles__StyledSwitch",componentId:"sc-18t9uhh-0"})(["& span{background-image:url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgb3BhY2l0eT0iMC4zIj4KPHBhdGggZD0iTTEwLjA4MyA0LjY4NzVWNkgxMi43MDhWMTQuNzVIMC40NTgwMDhWNkg4LjMzMzAxVjQuNjg3NUM4LjMzMzAxIDIuNTI3MzQgMTAuMDgzIDAuNzUgMTIuMjcwNSAwLjc1QzE0LjQzMDcgMC43NSAxNi4yMDggMi41MjczNCAxNi4yMDggNC42ODc1VjZWNi44NzVIMTQuNDU4VjZWNC42ODc1QzE0LjQ1OCAzLjQ4NDM4IDEzLjQ3MzYgMi41IDEyLjI3MDUgMi41QzExLjA0IDIuNSAxMC4wODMgMy40ODQzOCAxMC4wODMgNC42ODc1WiIgZmlsbD0iIzE0MTMyNyIvPgo8L2c+Cjwvc3ZnPgo=');background-repeat:no-repeat;background-position:50%;&::after{background-image:url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgb3BhY2l0eT0iMC41Ij4KPHBhdGggZD0iTTUuNDc4NTIgNC42ODc1VjZIOS44NTM1MlY0LjY4NzVDOS44NTM1MiAzLjQ4NDM4IDguODY5MTQgMi41IDcuNjY2MDIgMi41QzYuNDM1NTUgMi41IDUuNDc4NTIgMy40ODQzOCA1LjQ3ODUyIDQuNjg3NVpNMy43Mjg1MiA2VjQuNjg3NUMzLjcyODUyIDIuNTI3MzQgNS40Nzg1MiAwLjc1IDcuNjY2MDIgMC43NUM5LjgyNjE3IDAuNzUgMTEuNjAzNSAyLjUyNzM0IDExLjYwMzUgNC42ODc1VjZIMTMuNzkxVjE0Ljc1SDEuNTQxMDJWNkgzLjcyODUyWiIgZmlsbD0iIzE0MTMyNyIvPgo8L2c+Cjwvc3ZnPgo='),linear-gradient(90deg,#00d1ff 0%,#0054ff 100%);background-repeat:no-repeat;background-position:50%;}}"]);var Z=n(8978),S=n(77849),b=n(46445),E=n(43666);let T=()=>{var e,i,n,l;let{node:t,nodesOnSameASN:C,baseLatency:D,aggregateLatency:T,fileDownloadLatency:z,metricsLatency:V,relativeETHHeightPercent:F,lastMetricsCheck:K,calculatedRewards:J,creationDate:X,isOwner:q,nameCtrl:$,descriptionCtrl:ee,multiaddressCtrl:ei,pictureCtrl:en,bannerCtrl:ea,rewardCtrl:el,managerCtrl:er,lockedCtrl:et,registrationUrlCtrl:ed,isDirty:es,handleRemove:eo,handleSubmit:ec,handleUnlink:eu}=function(){let e=(0,u.useRouter)(),{hash:i}=e.query,[n]=(0,o.mr)(),{account:a}=n.account,{entities:l}=n.ccns,{node:t}=function(e){let{hash:i}=e,[n]=(0,o.mr)(),{entities:a}=n.ccns,l=(0,r.useMemo)(()=>{if(a)return a.filter(e=>e.hash===i)},[a,i]),[t]=l||[];return{node:t}}({hash:i}),d=(0,r.useMemo)(()=>new c.B(a),[a]),s=(0,h._)({node:t,nodes:l}),{calculatedRewards:x}=(0,m.Ht)({address:(null==t?void 0:t.reward)||""}),{aggregate_latency:p,file_download_latency:f,metrics_latency:y,eth_height_remaining:I}=(null==t?void 0:t.metricsData)||{},C=(0,r.useMemo)(()=>p?"".concat(Number(100*(p||0)).toFixed(2)," %"):void 0,[p]),D=(0,r.useMemo)(()=>f?"".concat(Number(100*(f||0)).toFixed(2)," %"):void 0,[f]),M=(0,r.useMemo)(()=>y?"".concat(Number(100*(y||0)).toFixed(2)," %"):void 0,[y]),w=(0,r.useMemo)(()=>{if(void 0!==I)return 0===I?0:Math.trunc((18643103-I)/18643103*10)/10},[I]),_=(0,r.useCallback)(async e=>{if(!t)return;let i=null==t?void 0:t.crnsData.find(i=>i.hash===e);i&&d.isUserLinked(i,t)&&await d.unlinkComputeResourceNode(e)},[t,d]),A=function(e){let{defaultValues:i}=e,n=(0,u.useRouter)(),[a]=(0,o.mr)(),{account:l}=a.account,t=(0,j.lm)(),d=(0,r.useMemo)(()=>new c.B(l),[l]),s=(0,r.useCallback)(async e=>{if(!d)throw Error("Manager not ready");let i=await d.updateCoreChannelNode(e);return i},[d]),m=(0,r.useCallback)(async e=>{if(!t)throw Error("Notification not ready");t.add({variant:"success",title:"Success",text:'Your node "'.concat(e,'" was updated successfully.')}),n.replace("/earn/ccn/".concat(e))},[t,n]),{control:h,handleSubmit:x,formState:{errors:p,isDirty:f}}=(0,v.c)({defaultValues:i,onSubmit:s,onSuccess:m,resolver:(0,N.F)(c.B.updateCCNSchema),readyDeps:[null==i?void 0:i.hash]}),y=(0,g.qo)({control:h}),I=(0,g.bc)({control:h,name:"name"}),C=(0,g.bc)({control:h,name:"description"}),D=(0,g.bc)({control:h,name:"multiaddress"}),M=(0,g.bc)({control:h,name:"picture"}),w=(0,g.bc)({control:h,name:"banner"}),_=(0,g.bc)({control:h,name:"reward"}),A=(0,g.bc)({control:h,name:"manager"}),Z=(0,g.bc)({control:h,name:"authorized"}),S=(0,g.bc)({control:h,name:"locked"}),b=(0,g.bc)({control:h,name:"registration_url"});return{values:y,control:h,nameCtrl:I,descriptionCtrl:C,multiaddressCtrl:D,pictureCtrl:M,bannerCtrl:w,rewardCtrl:_,managerCtrl:A,authorizedCtrl:Z,lockedCtrl:S,registrationUrlCtrl:b,errors:p,isDirty:f,handleSubmit:x}}({defaultValues:{hash:null==t?void 0:t.hash,name:null==t?void 0:t.name,picture:null==t?void 0:t.picture,banner:null==t?void 0:t.banner,description:null==t?void 0:t.description,reward:null==t?void 0:t.reward,authorized:null==t?void 0:t.authorized,locked:null==t?void 0:t.locked,registration_url:null==t?void 0:t.registration_url,manager:null==t?void 0:t.manager,multiaddress:null==t?void 0:t.multiaddress}});return{aggregateLatency:C,fileDownloadLatency:D,metricsLatency:M,relativeETHHeightPercent:w,calculatedRewards:x,handleUnlink:_,...A,...s}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d(),{children:[(0,a.jsx)("title",{children:"Aleph.im | CCN Detail"}),(0,a.jsx)("meta",{name:"description",content:"Aleph.im Compute Resource Node"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,a.jsx)("section",{children:(0,a.jsx)(s.Z,{node:t,nameCtrl:$,descriptionCtrl:ee,bannerCtrl:ea,pictureCtrl:en,isOwner:q})}),q&&(0,a.jsxs)(O,{children:[(0,a.jsxs)(j.zx,{kind:"flat",variant:"text-only",size:"regular",color:"error",onClick:eo,children:[(0,a.jsx)(j.JO,{name:"trash",color:"error",size:"lg"}),"remove node"]}),(0,a.jsx)(j.zx,{kind:"neon",variant:"primary",size:"regular",color:"main2",onClick:ec,disabled:!es,children:"save changes"})]}),(0,a.jsx)(L,{children:(0,a.jsxs)(f.Z,{children:[(0,a.jsx)("div",{children:(0,a.jsxs)(x.Z,{title:"GENERAL INFO",children:[(0,a.jsx)(Z.Z,{status:null==t?void 0:t.status}),(0,a.jsx)(p.HC,{name:"NAME",value:null==t?void 0:t.name}),(0,a.jsx)(p.HC,{name:"OWNER",value:(0,a.jsx)(E.Z,{href:(0,w.tz)({address:null==t?void 0:t.owner}),isOwner:!1,children:(null==t?void 0:t.owner)&&(0,w.zN)(null==t?void 0:t.owner)}),big:!0}),(0,a.jsx)(p.HC,{name:"REWARD ADDRESS",value:(0,a.jsx)(S.Z,{...el.field,...el.fieldState,placeholder:"address",isOwner:q,children:(0,a.jsx)(E.Z,{href:(0,w.tz)({tokenAddress:el.field.value}),isOwner:q,children:el.field.value&&(0,w.zN)(el.field.value)})}),big:!0}),(0,a.jsx)(p.HC,{name:"MULTI ADDRESS",value:(0,a.jsx)(S.Z,{...ei.field,...ei.fieldState,placeholder:"multi address",isOwner:q,children:(0,a.jsx)(E.Z,{href:(0,w.k2)({multiaddress:ei.field.value}),isOwner:q,children:ei.field.value&&(0,w.zN)(ei.field.value)})}),big:!0})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(x.Z,{title:"ADDITIONAL SETTINGS",children:[(0,a.jsx)(p.HC,{name:"MANAGER",value:(0,a.jsx)(S.Z,{...er.field,...er.fieldState,placeholder:"manager address",isOwner:q,children:(0,a.jsx)(E.Z,{href:(0,w.tz)({address:er.field.value}),isOwner:q,children:er.field.value&&(0,w.zN)(er.field.value)})}),big:!0}),(0,a.jsx)(p.HC,{name:"REGISTRATION URL",value:(0,a.jsx)(S.Z,{...ed.field,...ed.fieldState,placeholder:"registration url",isOwner:q,children:(0,a.jsx)(E.Z,{href:ed.field.value,isOwner:q,children:ed.field.value})}),big:!0}),(0,a.jsx)(p.HC,{name:et.field.value?"LOCKED":"UNLOCKED",value:(0,a.jsx)(A,{...et.field,...et.fieldState,checked:et.field.value,disabled:!q})})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(x.Z,{title:"REWARD INDICATORS",children:[(0,a.jsx)(p.HC,{name:"ASN",value:null==t?void 0:null===(e=t.metricsData)||void 0===e?void 0:e.as_name}),(0,a.jsx)(p.HC,{name:"NODES ON ASN",value:C}),(0,a.jsx)(p.HC,{name:"VERSION",value:null==t?void 0:null===(i=t.metricsData)||void 0===i?void 0:i.version}),(0,a.jsx)(p.HC,{name:"BASE LATENCY",value:D}),(0,a.jsx)(p.HC,{name:"AGGREGATE LATENCY",value:T}),(0,a.jsx)(p.HC,{name:"FILE DOWNLOAD LATENCY",value:z}),(0,a.jsx)(p.HC,{name:"METRICS LATENCY",value:V}),(0,a.jsx)(p.HC,{name:"ETH HEIGHT REMAINING",value:null==t?void 0:null===(n=t.metricsData)||void 0===n?void 0:n.eth_height_remaining}),(0,a.jsx)(y.Z,{$percent:F||0,$color:"main0"}),(0,a.jsx)(p.HC,{name:"LAST CHECK",value:K}),(0,a.jsx)(p.HC,{name:"linked resources",value:(0,a.jsx)(I.Z,{nodes:null==t?void 0:t.crnsData,subfix:" linked"})})]})}),(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{title:"POTENTIAL REWARD",children:(0,a.jsx)(p.HC,{name:"TOTAL REWARDS",value:(0,a.jsxs)(k,{children:[(0,a.jsx)(H,{children:null==J?void 0:J.toFixed(5)}),(0,a.jsx)(j.TR,{text:"",color:"main0"})]})})})}),(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{title:"LINKED RESOURCES",children:Array.from({length:Math.max(3,(null==t?void 0:t.crnsData.length)||0)},(e,i)=>{let n=null==t?void 0:t.crnsData[i];return n?(0,a.jsxs)(W,{children:[(0,a.jsx)(M(),{href:"/earn/crn/".concat(n.hash),legacyBehavior:!0,children:(0,a.jsx)(G,{hash:n.hash,name:n.name,picture:n.picture})}),q?(0,a.jsx)("button",{onClick:()=>eu(n.hash),children:(0,a.jsx)(j.JO,{name:"trash",color:"error"})}):(0,a.jsx)(a.Fragment,{})]},i):(0,a.jsxs)(R,{children:[(0,a.jsx)(P,{}),(0,a.jsx)(U,{className:"fs-10",children:q?(0,a.jsx)(_.Z,{href:"/earn/crn",color:"main0",size:"regular",kind:"neon",variant:"text-only",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(Q,{name:"link"})," link now"]})}):(0,a.jsx)(a.Fragment,{children:"not linked"})})]},i)})})}),(0,a.jsx)("div",{children:(0,a.jsxs)(x.Z,{title:"PERFORMANCE",children:[(0,a.jsx)(p.HC,{name:"TOTAL STAKED",value:(0,a.jsxs)(Y,{children:[(0,a.jsx)(B,{children:null==t?void 0:null===(l=t.total_staked)||void 0===l?void 0:l.toFixed(5)}),(0,a.jsx)(j.TR,{text:"",color:"main0"})]})}),(0,a.jsx)(p.HC,{name:"CREATION TIME",value:X})]})})]})}),(0,a.jsx)(b.Z,{show:!t,center:!0})]})};T.displayName="CoreChannelNodeDetailPage";var z=(0,r.memo)(T),O=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-55cyu2-0"})({marginTop:"2rem",marginBottom:"2rem",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"1.75rem"}),L=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection2",componentId:"sc-55cyu2-1"})({marginTop:"2rem"}),k=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-55cyu2-2"})({display:"inline-flex",alignItems:"center",gap:"0.5rem"}),H=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-55cyu2-3"})({whiteSpace:"nowrap"}),R=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-55cyu2-4"})({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),P=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-55cyu2-5"})({height:"1.5rem",width:"1.5rem",borderRadius:"9999px",backgroundColor:"#C4C4C433"}),U=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-55cyu2-6"})({lineHeight:"1rem"}),Q=(0,l.ZP)(j.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-55cyu2-7"})({height:"0.875rem",width:"0.875rem"}),W=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-55cyu2-8"})({display:"flex",alignItems:"center"}),G=(0,l.ZP)(C.Z).withConfig({displayName:"cmp___StyledNodeName",componentId:"sc-55cyu2-9"})({marginRight:"auto",width:"auto",cursor:"pointer"}),Y=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-55cyu2-10"})({display:"inline-flex",alignItems:"center",gap:"0.5rem"}),B=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-55cyu2-11"})({whiteSpace:"nowrap"}),V=z}},function(e){e.O(0,[959,312,2,528,774,888,179],function(){return e(e.s=18952)}),_N_E=e.O()}]);