(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[842],{93571:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/earn/ccn/new",function(){return t(41917)}])},87931:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(85893),i=t(41664),a=t.n(i),o=t(7251);function s(e){let{href:n,variant:t,color:i,kind:s,size:c,children:d}=e;return(0,r.jsx)(a(),{href:n,passHref:!0,legacyBehavior:!0,children:(0,r.jsx)(o.zx,{as:"a",variant:t||"secondary",color:i||"main0",kind:s||"neon",size:c||"regular",children:d})})}},58833:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(85893),i=t(19521),a=t(7251);let o=(0,i.ZP)(a.zx).attrs(e=>({...e,forwardedAs:"a",kind:"neon",variant:"text-only",color:"main0"})).withConfig({displayName:"styles__StyledExternalLinkButton",componentId:"sc-16jaolm-0"})([""]);function s(e){let{children:n,href:t,size:i="big",...a}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(o,{href:t,size:i,...a,target:"_blank",children:[n||t,(0,r.jsx)(c,{name:"square-up-right"})]})})}var c=(0,i.ZP)(a.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-mpznlq-0"})({marginLeft:"0.625rem"})},43291:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var r=t(85893),i=t(67294),a=t(19521);let o=a.ZP.form.withConfig({displayName:"styles__StyledForm",componentId:"sc-1c33mus-0"})(["",""],{display:"flex",flex:"1 1 0%",flexDirection:"column",gap:"2rem"});var s=t(7251);let c=e=>{let{children:n,onSubmit:t,errors:i,...a}=e;return(0,r.jsxs)(o,{onSubmit:t,noValidate:!0,...a,children:[n,(0,r.jsx)("div",{children:(null==i?void 0:i.root)&&Object.values(i.root).map(e=>(0,r.jsx)(s.Xq,{error:e},e+""))})]})};var d=(0,i.memo)(c)},78512:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(67294),i=t(11163),a=t(94461);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",[n]=(0,a.mr)(),t=(0,i.useRouter)();(0,r.useEffect)(()=>{n.account||t.replace(e)})}},10159:function(e,n,t){"use strict";t.d(n,{c:function(){return s}});var r=t(7251),i=t(67294),a=t(87536),o=t(1604);function s(e){let{onSubmit:n,onSuccess:t,onError:s,readyDeps:c=[],...d}=e,l=(0,a.cI)(d);(0,i.useEffect)(()=>{"object"==typeof d.defaultValues&&l.reset(d.defaultValues)},c);let[m,u]=(0,i.useState)({data:void 0,error:void 0,loading:!1}),[h,{onLoad:p,onSuccess:f,onError:y}]=(0,r.g7)({flushData:!0,state:m,setState:u,onSuccess:t,onError:s}),g=(0,i.useCallback)(async e=>{try{p();let t=await n(e);f(t)}catch(n){let e=n instanceof o.jm?Error("Validation error, check highlighted form fields"):(null==n?void 0:n.cause)||n;l.setError("root.serverError",{...e,message:null==e?void 0:e.message}),y(e)}},[l,y,p,n,f]),x=(0,i.useCallback)(async e=>{let n;if(console.log(e),!n){let t=function e(n){let[t]=Object.entries(n);if(!t)return;let[r,i]=t;if(Array.isArray(i)){let n=i[i.length-1];return e(n)}return[r,i]}(e);if(t){let[e,r]=t,i="string"==typeof r?r:(null==r?void 0:r.message)?": ".concat(r.message):(null==r?void 0:r.type)?': "'.concat(null==r?void 0:r.type,'" validation not satisfied'):"";n=Error('Error on field "'.concat(e,'"').concat(i))}}n||(n=Error("Validation error")),y(n)},[y]),_=(0,i.useMemo)(()=>l.handleSubmit(g,x),[l,g,x]);return{...l,requestState:h,handleSubmit:_}}},41917:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return z}});var r=t(85893),i=t(19521),a=t(67294),o=t(9008),s=t.n(o),c=t(43291),d=t(7251),l=t(78512),m=t(94461),u=t(11163),h=t(10159),p=t(87536),f=t(56312),y=t(48107),g=t(91421);let x={name:"",multiaddress:""};var _=t(58833),v=t(87931);let w=()=>{let{nameCtrl:e,multiaddressCtrl:n,errors:t,handleSubmit:i}=((0,l.Z)(),function(){let e=(0,u.useRouter)(),[n,t]=(0,m.mr)(),{account:r}=n.account,i=(0,d.lm)(),o=(0,a.useMemo)(()=>new y.B(r),[r]),s=(0,a.useCallback)(async e=>{if(!o)throw Error("Manager not ready");if(!r)throw Error("Invalid account");let n=await o.newCoreChannelNode(e),t=function(e,n,t){let r={hash:n,owner:t,reward:t,locked:!1,authorized:[],resource_nodes:[],crnsData:[],time:Date.now(),stakers:{},total_staked:0,status:"waiting",score:0,score_updated:!1,decentralization:0,performance:0,has_bonus:!1,...e,virtual:Date.now()};return r}(e,n,r.address);return t},[r,o]),c=(0,a.useCallback)(async n=>{if(!i)throw Error("Notification not ready");i.add({variant:"success",title:"Success",text:'Your node "'.concat(n.hash,'" was created successfully.')}),t(new g.Wy({name:"ccns",entities:[n]})),e.replace("/earn/ccn/".concat(n.hash))},[t,i,e]),{control:l,handleSubmit:_,formState:{errors:v}}=(0,h.c)({defaultValues:x,onSubmit:s,onSuccess:c,resolver:(0,f.F)(y.B.newCCNSchema)}),w=(0,p.qo)({control:l}),j=(0,p.bc)({control:l,name:"name"}),C=(0,p.bc)({control:l,name:"multiaddress"});return{values:w,control:l,nameCtrl:j,multiaddressCtrl:C,errors:v,handleSubmit:_}}());return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"Aleph.im | Create CCN"}),(0,r.jsx)("meta",{name:"description",content:"Aleph.im Create Core Channel Node"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,r.jsx)("section",{children:(0,r.jsx)(C,{className:"tp-h5",children:"Create core node"})}),(0,r.jsxs)(S,{onSubmit:i,errors:t,children:[(0,r.jsxs)(N,{children:[(0,r.jsx)(d.NP,{as:"h2",number:"1",children:"Set a name"}),(0,r.jsx)(b,{children:"Your node name should be short and meaningful."}),(0,r.jsxs)(d.Jy,{children:[(0,r.jsx)(d.oi,{...e.field,...e.fieldState,required:!0,label:"Node name",placeholder:"Give it a name"}),(0,r.jsx)(P,{children:"You can change this later if you want, even add a picture and description."})]})]}),(0,r.jsxs)(Z,{children:[(0,r.jsx)(d.NP,{as:"h2",number:"2",children:"Set multiaddress"}),(0,r.jsx)(k,{children:"The physical node has unique identifier called multiaddress. It links the physical node with the interface. Can be setup later on the info page of the node or here if the physical node is running. The link below explains in detail the install procedure and how to retrieve the multiaddress."}),(0,r.jsxs)(d.Jy,{children:[(0,r.jsx)(d.oi,{...n.field,...n.fieldState,required:!0,label:"Set multiaddress",placeholder:"/ip4/{ip-address}/tcp/4025/p2p/SmlS3hb..."}),(0,r.jsx)(E,{children:(0,r.jsx)(_.Z,{href:"https://docs.aleph.im/nodes/core/",size:"regular",children:"How to create a node"})})]})]}),(0,r.jsxs)(I,{children:[(0,r.jsx)(d.zx,{color:"main0",kind:"neon",variant:"primary",size:"regular",type:"submit",children:"Create core node"}),(0,r.jsx)(v.Z,{size:"regular",variant:"text-only",href:"/earn/ccn",children:"Cancel"})]})]})]})};w.displayName="NewCoreChannelNodePage";var j=(0,a.memo)(w),C=(0,i.ZP)("h1").withConfig({displayName:"cmp___StyledH",componentId:"sc-2yv219-0"})({marginBottom:"2rem"}),S=(0,i.ZP)(c.Z).withConfig({displayName:"cmp___StyledForm",componentId:"sc-2yv219-1"})({maxWidth:"44.6875rem"}),N=(0,i.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-2yv219-2"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem","@media (min-width: 768px)":{paddingBottom:"2.5rem"}}),b=(0,i.ZP)("p").withConfig({displayName:"cmp___StyledP",componentId:"sc-2yv219-3"})({marginBottom:"1.5rem",marginTop:"0.25rem"}),P=(0,i.ZP)("p").withConfig({displayName:"cmp___StyledP2",componentId:"sc-2yv219-4"})({marginTop:"1rem"}),Z=(0,i.ZP)("section").withConfig({displayName:"cmp___StyledSection2",componentId:"sc-2yv219-5"})({paddingLeft:"0px",paddingRight:"0px",paddingTop:"1.5rem",paddingBottom:"1.5rem","@media (min-width: 768px)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),k=(0,i.ZP)("p").withConfig({displayName:"cmp___StyledP3",componentId:"sc-2yv219-6"})({marginBottom:"1.5rem",marginTop:"0.25rem"}),E=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-2yv219-7"})({marginTop:"0.5rem"}),I=(0,i.ZP)("section").withConfig({displayName:"cmp___StyledSection3",componentId:"sc-2yv219-8"})({display:"flex",gap:"2.5rem"}),z=j},9008:function(e,n,t){e.exports=t(42636)}},function(e){e.O(0,[312,774,888,179],function(){return e(e.s=93571)}),_N_E=e.O()}]);