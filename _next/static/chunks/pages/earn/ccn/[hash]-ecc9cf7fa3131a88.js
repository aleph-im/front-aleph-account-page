(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{18952:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/earn/ccn/[hash]",function(){return n(18743)}])},52984:function(e,i,n){"use strict";n.d(i,{Z:function(){return r}});var l=n(19521);let a=l.ZP.div.withConfig({displayName:"styles__StyledProgressBar",componentId:"sc-lav9ln-0"})(e=>{var i;let{theme:n,$color:a="main0",$gradient:r,$percent:t}=e,d=r?null===(i=n.gradient[r])||void 0===i?void 0:i.fn:void 0,s=d||n.color[a]||a,o=n.color.disabled2;return[{position:"relative",height:"0.125rem",width:"100%"},(0,l.iv)(["background-color:",";&:after{"," content:'';background-color:",";width:","%;}"],o,{position:"absolute",left:"0px",top:"0px",height:"100%"},s,100*t)]});var r=a},90709:function(e,i,n){"use strict";n.d(i,{Z:function(){return o}});var l=n(85893),a=n(19521),r=n(67294);let t=a.ZP.div.withConfig({displayName:"styles__StyledDotIcon",componentId:"sc-q6l3ug-0"})(e=>{let{theme:i,$score:n}=e,l=void 0===n?i.color.disabled2:n>=.8?i.color.success:n>=.5?i.color.info:i.color.error;return[{height:"0.75rem",width:"0.5rem"},(0,a.iv)(["background-color:",";"],l)]});var d=n(48107);let s=e=>{let{nodes:i,subfix:n,...a}=e,r=d.B.maxLinkedPerNode;return(0,l.jsxs)(c,{...a,children:[(0,l.jsx)(u,{children:Array.from({length:r},(e,n)=>{var a;return(0,l.jsx)(t,{$score:null==i?void 0:null===(a=i[n])||void 0===a?void 0:a.score},n)})}),(0,l.jsxs)(m,{className:"fs-10",children:[null==i?void 0:i.length," ",(0,l.jsxs)(h,{children:["of ",r,n]})]})]})};s.displayName="NodeLinkedNodes";var o=(0,r.memo)(s),c=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1i7lvnr-0"})({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),u=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1i7lvnr-1"})({display:"flex",alignItems:"stretch",gap:"0.125rem"}),m=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1i7lvnr-2"})({whiteSpace:"nowrap",lineHeight:"1rem"}),h=(0,a.ZP)("span").withConfig({displayName:"cmp___StyledSpan",componentId:"sc-1i7lvnr-3"})({opacity:"0.2"})},18743:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return K}});var l=n(85893),a=n(19521),r=n(67294),t=n(9008),d=n.n(t),s=n(41664),o=n.n(s),c=n(94461),u=n(11163),m=n(94527),h=n(15457),g=n(10159),v=n(87536),N=n(56312),p=n(48107),x=n(72771),j=n(91421),f=n(73384),y=n(34853),D=n(1218),I=n(68390),C=n(52984),M=n(90709),w=n(87931);let _=(0,a.ZP)(x.rs).withConfig({displayName:"styles__StyledSwitch",componentId:"sc-18t9uhh-0"})(["& span{background-image:url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgb3BhY2l0eT0iMC4zIj4KPHBhdGggZD0iTTEwLjA4MyA0LjY4NzVWNkgxMi43MDhWMTQuNzVIMC40NTgwMDhWNkg4LjMzMzAxVjQuNjg3NUM4LjMzMzAxIDIuNTI3MzQgMTAuMDgzIDAuNzUgMTIuMjcwNSAwLjc1QzE0LjQzMDcgMC43NSAxNi4yMDggMi41MjczNCAxNi4yMDggNC42ODc1VjZWNi44NzVIMTQuNDU4VjZWNC42ODc1QzE0LjQ1OCAzLjQ4NDM4IDEzLjQ3MzYgMi41IDEyLjI3MDUgMi41QzExLjA0IDIuNSAxMC4wODMgMy40ODQzOCAxMC4wODMgNC42ODc1WiIgZmlsbD0iIzE0MTMyNyIvPgo8L2c+Cjwvc3ZnPgo=');background-repeat:no-repeat;background-position:50%;&::after{background-image:url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgb3BhY2l0eT0iMC41Ij4KPHBhdGggZD0iTTUuNDc4NTIgNC42ODc1VjZIOS44NTM1MlY0LjY4NzVDOS44NTM1MiAzLjQ4NDM4IDguODY5MTQgMi41IDcuNjY2MDIgMi41QzYuNDM1NTUgMi41IDUuNDc4NTIgMy40ODQzOCA1LjQ3ODUyIDQuNjg3NVpNMy43Mjg1MiA2VjQuNjg3NUMzLjcyODUyIDIuNTI3MzQgNS40Nzg1MiAwLjc1IDcuNjY2MDIgMC43NUM5LjgyNjE3IDAuNzUgMTEuNjAzNSAyLjUyNzM0IDExLjYwMzUgNC42ODc1VjZIMTMuNzkxVjE0Ljc1SDEuNTQxMDJWNkgzLjcyODUyWiIgZmlsbD0iIzE0MTMyNyIvPgo8L2c+Cjwvc3ZnPgo='),linear-gradient(90deg,#00d1ff 0%,#0054ff 100%);background-repeat:no-repeat;background-position:50%;}}"]);var A=n(8978),Z=n(77849),S=n(43666),b=n(33358),E=n(25675),T=n.n(E),z=n(7954);let O=()=>{var e,i,n;let{node:a,baseLatency:t,aggregateLatency:s,fileDownloadLatency:E,metricsLatency:O,relativeETHHeightPercent:L,lastMetricsCheck:K,calculatedRewards:J,creationDate:X,isOwner:q,nameCtrl:$,descriptionCtrl:ee,multiaddressCtrl:ei,pictureCtrl:en,bannerCtrl:el,rewardCtrl:ea,managerCtrl:er,lockedCtrl:et,registrationUrlCtrl:ed,isDirty:es,account:eo,isUnlinkableByUser:ec,handleUnlink:eu,handleRemove:em,handleSubmit:eh}=function(){let e=(0,u.useRouter)(),{hash:i}=e.query,[n]=(0,c.mr)(),{entities:l}=n.ccns,{node:a}=function(e){let{hash:i}=e,[n]=(0,c.mr)(),{entities:l}=n.ccns,a=(0,r.useMemo)(()=>{if(l)return l.filter(e=>e.hash===i)},[l,i]),[t]=a||[];return{node:t}}({hash:i}),t=(0,h._)({node:a,nodes:l}),{calculatedRewards:d}=(0,m.H)({address:(null==a?void 0:a.reward)||""}),{aggregate_latency:s,file_download_latency:o,metrics_latency:y,eth_height_remaining:D}=(null==a?void 0:a.metricsData)||{},I=(0,r.useMemo)(()=>s?"".concat(Number(100*(s||0)).toFixed(2)," %"):void 0,[s]),C=(0,r.useMemo)(()=>o?"".concat(Number(100*(o||0)).toFixed(2)," %"):void 0,[o]),M=(0,r.useMemo)(()=>y?"".concat(Number(100*(y||0)).toFixed(2)," %"):void 0,[y]),w=(0,r.useMemo)(()=>{if(void 0!==D)return 0===D?0:Math.trunc((18643103-D)/18643103*10)/10},[D]),{isUnlinkableByUser:_,handleUnlink:A}=(0,f.i)(),Z=(0,r.useMemo)(()=>({hash:null==a?void 0:a.hash,name:null==a?void 0:a.name,picture:null==a?void 0:a.picture,banner:null==a?void 0:a.banner,description:null==a?void 0:a.description,reward:null==a?void 0:a.reward,authorized:null==a?void 0:a.authorized,locked:null==a?void 0:a.locked,registration_url:null==a?void 0:a.registration_url,manager:null==a?void 0:a.manager,multiaddress:null==a?void 0:a.multiaddress}),[a]),S=function(e){let{defaultValues:i}=e,[n,l]=(0,c.mr)(),{account:a}=n.account,{entities:t}=n.ccns,d=(0,x.lm)(),s=(0,r.useMemo)(()=>new p.B(a),[a]),o=(0,r.useCallback)(async e=>{if(!s)throw Error("Manager not ready");if(!a)throw Error("Invalid account");let[,i]=await s.updateCoreChannelNode(e),n=null==t?void 0:t.find(e=>e.hash===i.hash),l=function(e,i){let n={...e||{},...i,virtual:Date.now()};return n}(n,i);return l},[a,s,t]),u=(0,r.useCallback)(async e=>{if(!d)throw Error("Notification not ready");d.add({variant:"success",title:"Success",text:'Your node "'.concat(e.hash,'" was updated successfully.')}),l(new j.Wy({name:"ccns",entities:[e]}))},[l,d]),{control:m,handleSubmit:h,formState:{errors:f,isDirty:y}}=(0,g.c)({defaultValues:i,onSubmit:o,onSuccess:u,resolver:(0,N.F)(p.B.updateCCNSchema),readyDeps:[i]}),D=(0,v.qo)({control:m}),I=(0,v.bc)({control:m,name:"name"}),C=(0,v.bc)({control:m,name:"description"}),M=(0,v.bc)({control:m,name:"multiaddress"}),w=(0,v.bc)({control:m,name:"picture"}),_=(0,v.bc)({control:m,name:"banner"}),A=(0,v.bc)({control:m,name:"reward"}),Z=(0,v.bc)({control:m,name:"manager"}),S=(0,v.bc)({control:m,name:"authorized"}),b=(0,v.bc)({control:m,name:"locked"}),E=(0,v.bc)({control:m,name:"registration_url"});return{values:D,control:m,nameCtrl:I,descriptionCtrl:C,multiaddressCtrl:M,pictureCtrl:w,bannerCtrl:_,rewardCtrl:A,managerCtrl:Z,authorizedCtrl:S,lockedCtrl:b,registrationUrlCtrl:E,errors:f,isDirty:y,handleSubmit:h}}({defaultValues:Z});return{aggregateLatency:I,fileDownloadLatency:C,metricsLatency:M,relativeETHHeightPercent:w,calculatedRewards:d,isUnlinkableByUser:_,handleUnlink:A,...S,...t}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(d(),{children:[(0,l.jsx)("title",{children:"Aleph.im | CCN Detail"}),(0,l.jsx)("meta",{name:"description",content:"Aleph.im Compute Resource Node"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,l.jsx)("section",{children:(0,l.jsx)(D.Z,{node:a,nameCtrl:$,descriptionCtrl:ee,bannerCtrl:el,pictureCtrl:en,isOwner:q})}),q&&(0,l.jsxs)(P,{children:[(0,l.jsxs)(x.zx,{kind:"flat",variant:"textOnly",size:"md",color:"error",onClick:em,children:[(0,l.jsx)(x.JO,{name:"trash",color:"error",size:"lg"}),"remove node"]}),(0,l.jsx)(x.zx,{kind:"neon",variant:"primary",size:"md",color:"main2",onClick:eh,disabled:!es,children:"save changes"})]}),(0,l.jsx)(k,{children:(0,l.jsxs)(H,{children:[(0,l.jsxs)(R,{children:[(0,l.jsxs)(I.ZP,{title:"GENERAL INFO",children:[(0,l.jsx)(A.Z,{status:null==a?void 0:a.status}),(0,l.jsx)(I.HC,{name:"NAME",value:null==a?void 0:a.name}),(0,l.jsx)(I.HC,{name:"ASN",value:null==a?void 0:null===(e=a.metricsData)||void 0===e?void 0:e.as_name}),(0,l.jsx)(I.HC,{name:"OWNER",value:(0,l.jsx)(S.Z,{href:(0,y.tz)({address:null==a?void 0:a.owner}),isOwner:!1,children:(null==a?void 0:a.owner)&&(0,y.zN)(null==a?void 0:a.owner)}),big:!0}),(0,l.jsx)(I.HC,{name:"REWARD ADDRESS",value:(0,l.jsx)(Z.Z,{...ea.field,...ea.fieldState,placeholder:"address",isOwner:q,children:(0,l.jsx)(S.Z,{href:(0,y.tz)({tokenAddress:ea.field.value}),isOwner:q,children:ea.field.value&&(0,y.zN)(ea.field.value)})}),big:!0}),(0,l.jsx)(I.HC,{name:"MULTI ADDRESS",value:(0,l.jsx)(Z.Z,{...ei.field,...ei.fieldState,placeholder:"multi address",isOwner:q,children:(0,l.jsx)(S.Z,{href:(0,y.k2)({multiaddress:ei.field.value}),isOwner:q,children:ei.field.value&&(0,y.zN)(ei.field.value)})}),big:!0})]}),(0,l.jsxs)(I.ZP,{title:"ADDITIONAL SETTINGS",children:[(0,l.jsx)(I.HC,{name:"MANAGER",value:(0,l.jsx)(Z.Z,{...er.field,...er.fieldState,placeholder:"manager address",isOwner:q,children:(0,l.jsx)(S.Z,{href:(0,y.tz)({address:er.field.value}),isOwner:q,children:er.field.value&&(0,y.zN)(er.field.value)})}),big:!0}),(0,l.jsx)(I.HC,{name:"REGISTRATION URL",value:(0,l.jsx)(Z.Z,{...ed.field,...ed.fieldState,placeholder:"registration url",isOwner:q,children:(0,l.jsx)(S.Z,{href:ed.field.value,isOwner:q,children:ed.field.value})}),big:!0}),(0,l.jsx)(I.HC,{name:et.field.value?"LOCKED":"UNLOCKED",value:(0,l.jsx)(_,{...et.field,...et.fieldState,checked:et.field.value,disabled:!q})})]})]}),(0,l.jsxs)(W,{children:[(0,l.jsxs)(I.ZP,{title:"REWARD INDICATORS",children:[(0,l.jsx)(I.HC,{name:"VERSION",value:null==a?void 0:null===(i=a.metricsData)||void 0===i?void 0:i.version}),(0,l.jsx)(I.HC,{name:"BASE LATENCY",value:t}),(0,l.jsx)(I.HC,{name:"AGGREGATE LATENCY",value:s}),(0,l.jsx)(I.HC,{name:"FILE DOWNLOAD LATENCY",value:E}),(0,l.jsx)(I.HC,{name:"METRICS LATENCY",value:O}),(0,l.jsx)(I.HC,{name:"ETH HEIGHT REMAINING",value:null==a?void 0:null===(n=a.metricsData)||void 0===n?void 0:n.eth_height_remaining}),(0,l.jsx)(C.Z,{$percent:L||0,$color:"main0"}),(0,l.jsx)(I.HC,{name:"LAST CHECK",value:K}),(0,l.jsx)(I.HC,{name:"linked resources",value:(0,l.jsx)(M.Z,{nodes:null==a?void 0:a.crnsData,subfix:" linked"})})]}),(0,l.jsx)(I.ZP,{title:"POTENTIAL REWARD",children:(0,l.jsx)(I.HC,{name:"TOTAL REWARDS",value:(0,l.jsx)(z.Z,{value:J})})})]}),(0,l.jsxs)(U,{children:[(0,l.jsx)(I.ZP,{title:"LINKED RESOURCES",children:Array.from({length:Math.max(p.B.maxLinkedPerNode,(null==a?void 0:a.crnsData.length)||0)},(e,i)=>{let n=null==a?void 0:a.crnsData[i];return null==n||n.owner,null==eo||eo.address,n?(0,l.jsxs)(V,{children:[(0,l.jsx)(o(),{href:"/earn/crn/".concat(n.hash),legacyBehavior:!0,children:(0,l.jsx)(F,{hash:n.hash,name:n.name,picture:n.picture,apiServer:b.pf,ImageCmp:T()})}),ec(n)&&(0,l.jsx)("button",{onClick:()=>eu(n),children:(0,l.jsx)(x.JO,{name:"trash",color:"error"})})]},i):(0,l.jsxs)(Q,{children:[(0,l.jsx)(G,{}),(0,l.jsx)(Y,{className:"fs-10",children:q?(0,l.jsx)(w.Z,{href:"/earn/crn",color:"main0",size:"md",kind:"neon",variant:"textOnly",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(B,{name:"link"})," link now"]})}):(0,l.jsx)(l.Fragment,{children:"not linked"})})]},i)})}),(0,l.jsxs)(I.ZP,{title:"PERFORMANCE",children:[(0,l.jsx)(I.HC,{name:"TOTAL STAKED",value:(0,l.jsx)(z.Z,{value:null==a?void 0:a.total_staked})}),(0,l.jsx)(I.HC,{name:"CREATION TIME",value:X})]})]})]})})]})};O.displayName="CoreChannelNodeDetailPage";var L=(0,r.memo)(O),P=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-55cyu2-0"})({marginTop:"2rem",marginBottom:"2rem",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"1.75rem"}),k=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection2",componentId:"sc-55cyu2-1"})({marginTop:"2rem"}),H=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-55cyu2-2"})({display:"flex",flexWrap:"wrap",gap:"2.25rem"}),R=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-55cyu2-3"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),W=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-55cyu2-4"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),U=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-55cyu2-5"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),Q=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-55cyu2-6"})({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),G=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-55cyu2-7"})({height:"1.5rem",width:"1.5rem",borderRadius:"9999px",backgroundColor:"#C4C4C433"}),Y=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-55cyu2-8"})({lineHeight:"1rem"}),B=(0,a.ZP)(x.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-55cyu2-9"})({height:"0.875rem",width:"0.875rem"}),V=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-55cyu2-10"})({display:"flex",alignItems:"center"}),F=(0,a.ZP)(x.tJ).withConfig({displayName:"cmp___StyledNodeName",componentId:"sc-55cyu2-11"})({marginRight:"auto",width:"auto",cursor:"pointer"}),K=L}},function(e){e.O(0,[959,312,505,992,774,888,179],function(){return e(e.s=18952)}),_N_E=e.O()}]);