(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[838],{44994:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/earn/staking",function(){return a(82190)}])},82190:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ew}});var n=a(85893),i=a(19521),s=a(67294),r=a(9008),l=a.n(r),o=a(72771),d=a(94461),c=a(48107),m=a(96272),p=a(38753),h=a(51383),u=a(87274),g=a(47630),x=a(91421),f=a(32998);let y=(0,i.ZP)(o.iA).attrs(e=>({...e,borderType:"solid",stickyHeader:!1})).withConfig({displayName:"styles__StyledTable",componentId:"sc-b7wjwz-0"})(["&&{thead{","}td,th{"," border-bottom:1px solid #ffffff22;&:first-child{","}&:last-child{","}}}"],{display:"none"},{width:"0px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:"0.75rem",paddingBottom:"0.75rem"},{width:"66.666667%",maxWidth:"0rem",fontSize:"0.75rem",textTransform:"uppercase"},{textAlign:"right"});var w=a(13153),v=a(7954);let _=e=>{let{nodes:t,...a}=e,[i,r]=(0,s.useState)(1e3),l=(0,s.useCallback)(e=>{let t=e.target.value?Number(e.target.value):void 0;r(t)},[]),d=(0,s.useMemo)(()=>{let e=new g.S,a=e.totalPerAlephPerDay(t||[])*(i||0),s=100*e.currentAPY(t||[]);return[{name:"Rewards per day",value:(0,n.jsx)(v.Z,{value:a})},{name:"Current APY",value:"".concat(s.toFixed(2),"%")}]},[t,i]);return(0,n.jsxs)(w.Z,{loading:!t,...a,children:[(0,n.jsx)(j,{forwardedAs:"h3",type:"info",color:"main0",children:"REWARD CALCULATOR"}),(0,n.jsx)(S,{children:(0,n.jsx)(o.oi,{value:i,onChange:l,type:"number",name:"staked-amount",placeholder:"0",label:"Amount staked",buttonStyle:"wrapped"})}),(0,n.jsx)(y,{borderType:"solid",rowKey:e=>e.name,columns:[{label:"",render:e=>e.name},{label:"",render:e=>e.value}],data:d})]})};_.displayName="RewardCalculator";var k=(0,s.memo)(_),j=(0,i.ZP)(o.DU).withConfig({displayName:"cmp___StyledTextGradient",componentId:"sc-15iqn8s-0"})({marginBottom:"1.5rem"}),S=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-15iqn8s-1"})({marginBottom:"1rem"}),N=a(68461),b=a(90709),C=a(60202),P=a(11140);let I=e=>{let{node:t,account:a,accountBalance:i=0,onStake:r,onUnstake:l}=e,d=(0,s.useMemo)(()=>new c.B(a),[a]),m=(0,s.useMemo)(()=>d.isUserStake(t),[t,d]),p=(0,s.useMemo)(()=>{let[e]=d.isStakeableBy(t,i);return!e},[d,t,i]),h=(0,s.useCallback)(()=>{m?l(t.hash):r(t.hash)},[m,l,t.hash,r]);return(0,n.jsx)(n.Fragment,{children:m?(0,n.jsx)(o.zx,{kind:"neon",size:"md",variant:"secondary",color:"main2",onClick:h,children:"Unstake"}):(0,n.jsx)(o.zx,{kind:"neon",size:"md",variant:"secondary",color:"main0",onClick:h,disabled:p,children:"Stake"})})};I.displayName="StakeButton";var Z=(0,s.memo)(I);let A=e=>{let{amount:t,...a}=e;return(0,n.jsx)(v.Z,{value:t})};A.displayName="NodeAmount";var D=(0,s.memo)(A),B=a(87931),M=a(33358),E=a(25675),T=a.n(E);let W=e=>{let{nodes:t,filteredNodes:a,account:i,accountBalance:r,showStakedAmount:l,nodesIssues:d,loadItemsDisabled:c,handleLoadItems:m,handleSortItems:p,handleStake:h,handleUnstake:u}=e,g=(0,s.useMemo)(()=>{let e=[{label:"",align:"center",width:0,cellProps:()=>({css:{padding:"0px !important"}}),hcellProps:()=>({css:{borderWidth:"0px !important",padding:"0px !important"}}),render:e=>(null==d?void 0:d[e.hash])?(0,n.jsx)(U,{children:"\xa0"}):null},{label:"EST. APY",render:e=>(0,n.jsx)(C.Z,{node:e,nodes:t})},{label:"NAME",sortable:!0,sortBy:e=>e.name,render:e=>(0,n.jsx)(o.tJ,{hash:e.hash,name:e.name,picture:e.picture,apiServer:M.pf,ImageCmp:T()})},{label:"STAKED",sortable:!0,width:"100%",sortBy:e=>e.total_staked,render:e=>(0,n.jsx)(P.Z,{staked:e.total_staked,status:e.status,locked:e.locked})},{label:"LINKED",sortable:!0,sortBy:e=>e.resource_nodes.length,render:e=>(0,n.jsx)(b.Z,{nodes:e.crnsData})},{label:"SCORE",sortable:!0,sortBy:e=>e.score,render:e=>(0,n.jsx)(o.WG,{score:e.score})},{label:"",align:"right",render:e=>(0,n.jsxs)(z,{children:[(0,n.jsx)(Z,{node:e,account:i,accountBalance:r,onStake:h,onUnstake:u}),(0,n.jsx)(B.Z,{kind:"neon",size:"md",variant:"secondary",color:"main0",href:"/earn/ccn/".concat(e.hash),children:"Info"})]})}];return l&&i&&e.splice(e.length-1,0,{label:"AMOUNT",sortable:!0,sortBy:e=>e.stakers[i.address]||0,render:e=>(0,n.jsx)(D,{amount:e.stakers[i.address]||0})}),e},[i,r,t,d,h,u,l]);return(0,n.jsx)(N.Z,{columns:g,data:a,infiniteScroll:!c,onLoadMore:m,onSort:p})};W.displayName="StakingNodesTable";var R=(0,s.memo)(W),U=(0,i.ZP)(o.Cc).withConfig({displayName:"cmp___StyledNotificationBadge",componentId:"sc-1pzgecm-0"})({marginLeft:"auto !important",marginRight:"auto !important",display:"flex !important"}),z=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1pzgecm-1"})({display:"flex",justifyContent:"flex-end",gap:"0.75rem"}),F=a(32350),O=a(33445),L=a(34816),H=a(43815),K=a(42983),Y=a(87625);let G=e=>{let{nodes:t,...a}=e,r=(0,s.useMemo)(()=>new g.S,[]),l=(0,i.Fg)(),d=(0,s.useMemo)(()=>{let e=r.totalStakedByOperators(t||[]),a=r.totalStaked(t||[]),n=a-e;return[{label:"Stakers",value:"".concat((n/1e6).toFixed(2),"M"),percentage:n/a,gradient:"main0"},{label:"Node operators",value:"".concat((e/1e6).toFixed(2),"M"),percentage:e/a,color:"main1"}]},[t,r]),c=l.color.disabled2;return(0,n.jsxs)(w.Z,{loading:!t,...a,children:[(0,n.jsx)(X,{forwardedAs:"h3",type:"info",color:"main0",children:"STAKED"}),(0,n.jsxs)($,{children:[(0,n.jsxs)(q,{data:d,width:100,height:100,margin:{},children:[(0,n.jsx)("defs",{children:(0,n.jsx)(Y._,{data:d})}),(0,n.jsx)(L.b,{data:[{v:1}],dataKey:"v",stroke:"transparent",innerRadius:"72%",outerRadius:"100%",startAngle:450,endAngle:90,isAnimationActive:!1,fill:c}),(0,n.jsx)(L.b,{data:d,dataKey:"percentage",stroke:"transparent",innerRadius:"72%",outerRadius:"100%",startAngle:450,endAngle:90,children:d.map(e=>{let t="gr-".concat(e.gradient),a=e.gradient?"url(#".concat(t,")"):e.color?l.color[e.color]||e.color:void 0;return(0,n.jsx)(H.b,{fill:a},e.label)})})]}),(0,n.jsx)(Q,{children:d.map(e=>(0,n.jsxs)(V,{children:[(0,n.jsx)(o.cu,{$color:"transparent"===e.color?c:e.color,$gradient:e.gradient,$size:"1.25rem"}),(0,n.jsxs)(ee,{className:"tp-body3",children:[(0,n.jsx)("div",{children:e.value}),(0,n.jsx)(et,{className:"fs-10",children:e.label})]})]},e.label))})]})]})};G.displayName="StakeChart";var J=(0,s.memo)(G),X=(0,i.ZP)(o.DU).withConfig({displayName:"cmp___StyledTextGradient",componentId:"sc-1x6nlsc-0"})({margin:"0px",minHeight:"2rem"}),$=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1x6nlsc-1"})({display:"flex",flexDirection:"column",alignItems:"center"}),q=(0,i.ZP)(K.u).withConfig({displayName:"cmp___StyledPieChart",componentId:"sc-1x6nlsc-2"})({marginTop:"0.75rem",marginBottom:"0.75rem",minHeight:"6.25rem"}),Q=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1x6nlsc-3"})({marginTop:"0.25rem",display:"flex",flexDirection:"column",gap:"1rem"}),V=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1x6nlsc-4"})({display:"flex",alignItems:"center",gap:"0.75rem"}),ee=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1x6nlsc-5"})({display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"0.25rem",whiteSpace:"nowrap",fontStyle:"normal",lineHeight:"1rem !important"}),et=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1x6nlsc-6"})({opacity:"0.6"}),ea=a(76625);let en=e=>{let{account:t,accountBalance:a,nodes:i,paginatedSortedFilteredNodes:r,stakeNodes:y,filteredStakeNodes:w,tabs:v,selectedTab:_,filter:j,isStakeableOnly:S,isStakeableOnlyDisabled:N,nodesIssues:b,loadItemsDisabled:C,handleLoadItems:P,handleSortItems:I,handleTabChange:Z,handleFilterChange:A,handleStake:D,handleUnstake:B,handleStakeableOnlyChange:M}=function(e){let[t]=(0,d.mr)(),{account:a,balance:i=0}=t.account,r=(0,s.useMemo)(()=>new c.B(a),[a]),{nodes:l,filteredNodes:y,...w}=(0,m.v)(e),[v,_]=(0,s.useState)(),k=(0,s.useCallback)(async e=>{let t=e.target.checked;_(t)},[]),{stakeNodes:j}=(0,u.e)({nodes:l}),{stakeNodes:S}=(0,u.e)({nodes:y}),{nodesIssues:N,warningFlag:b}=(0,p.i)({nodes:S,isStaking:!0}),[C,P]=(0,s.useState)(),I=C||((null==j?void 0:j.length)?"user":"nodes"),Z=(0,s.useMemo)(()=>{let e=[{id:"nodes",name:"All core nodes"},{id:"user",name:"My stakes",label:b?{label:(0,n.jsx)(o.Cc,{children:b}),position:"top"}:void 0}];return e},[b]),A=(0,s.useMemo)(()=>{if(y)return y.filter(e=>r.isStakeableBy(e,i)[0])},[i,y,r]),D=!(null==A?void 0:A.length)||"nodes"!==I,B=!D&&(void 0!==v?v:!!a),M=(0,s.useMemo)(()=>B&&a?A:y,[B,y,a,A]),{sortedNodes:E}=(0,h.L)({nodesIssues:N,nodes:S}),{handleStake:T,handleUnstake:W}=function(){let[e,t]=(0,d.mr)(),{account:a,balance:n=0}=e.account,{entities:i}=e.ccns,r=(0,s.useMemo)(()=>new g.S(a),[a]),l=(0,s.useMemo)(()=>new c.B(a),[a]),m=(0,o.lm)(),p=(0,s.useMemo)(()=>r.totalStakedByUser(i||[]),[i,r]),h=(0,s.useCallback)(async e=>{try{if(!m)throw Error("Notification not ready");if(!a)throw Error("Invalid account");let s=null==i?void 0:i.find(t=>t.hash===e);if(!s)throw Error("Invalid staking node");if(!l.isStakeableBy(s,n))throw Error("Not stakeable node");await r.stake(e),m.add({variant:"success",title:"Success",text:'Staked in "'.concat(e,'" successfully.')});let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=[...e.filter(e=>i.isUserStake(e)),t],r=n/s.length,l=s.map(e=>({...e,stakers:{...e.stakers,[a]:r},virtual:Date.now()}));return l}(i,s,a.address,n,l);return t(new x.Wy({name:"ccns",entities:o})),!0}catch(e){null==m||m.add({variant:"error",title:"Error",text:e.message})}return!1},[a,n,t,l,i,m,r]),u=(0,s.useCallback)(async e=>{try{if(!m)throw Error("Notification not ready");if(!a)throw Error("Invalid account");let s=null==i?void 0:i.find(t=>t.hash===e);if(!s)throw Error("Invalid staking node");if(!l.isUserStake(s))throw Error("Not stakeable node");await r.unstake(e),m.add({variant:"success",title:"Success",text:'Unstaked from "'.concat(e,'" successfully.')});let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=e.filter(e=>i.isUserStake(e)),r=n/(s.length-1),l=s.map(e=>{let n;if(e.hash===t.hash){let{[a]:t,...i}=e.stakers;n=i}else n={...e.stakers,[a]:r};return{...e,stakers:n,virtual:Date.now()}});return l}(i,s,a.address,n,l);return t(new x.Wy({name:"ccns",entities:o})),!0}catch(e){null==m||m.add({variant:"error",title:"Error",text:e.message})}return!1},[a,n,t,l,i,m,r]);return{userStake:p,handleStake:h,handleUnstake:u}}(),R=(0,s.useCallback)(async e=>{let t=await T(e);t&&P("user")},[T]),U=(0,s.useCallback)(async e=>{let t=await W(e);t&&(!j||j.length<=1)&&P("nodes")},[W,j]),z=(0,s.useMemo)(()=>{if(M)return M.sort((e,t)=>{let a=1-Math.min(e.total_staked/c.B.maxStakedPerNode,1),n=1-Math.min(t.total_staked/c.B.maxStakedPerNode,1),i=e.score+e.total_staked>=c.B.maxStakedPerNode?0:(e.score+a)/2,s=t.score+t.total_staked>=c.B.maxStakedPerNode?0:(t.score+n)/2;return s-i})},[M]),{list:F,handleSortItems:O}=(0,f.g)({list:z}),{list:L,loadItemsDisabled:H,handleLoadItems:K}=(0,o.fw)({list:F});return{...w,account:a,accountBalance:i,nodes:l,filteredNodes:M,stakeNodes:j,filteredStakeNodes:E,selectedTab:I,tabs:Z,isStakeableOnly:B,isStakeableOnlyDisabled:D,nodesIssues:N,paginatedSortedFilteredNodes:L,loadItemsDisabled:H,handleSortItems:O,handleLoadItems:K,handleTabChange:P,handleStake:R,handleUnstake:U,handleStakeableOnlyChange:k}}(e),{render:E}=(0,ea.W)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l(),{children:[(0,n.jsx)("title",{children:"Aleph.im | Account"}),(0,n.jsx)("meta",{name:"description",content:"Aleph.im Account Dashboard"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,n.jsx)("section",{children:(0,n.jsx)(es,{className:"tp-h5",children:"Staking"})}),(0,n.jsx)("section",{children:(0,n.jsx)(F.Z,{children:(0,n.jsxs)(er,{children:[(0,n.jsxs)(el,{children:[(0,n.jsx)(eo,{className:"tp-h7",children:"What is staking with Aleph.im?"}),(0,n.jsxs)("p",{className:"fs-16",children:["What is staking with Aleph.im? Staking is the heartbeat of our dynamic peer-to-peer network, driving security, decentralization, and rewards. With a minimum of 10,000 Aleph tokens, stakeholders form the network's foundation. Rewards are distributed every 10 days and are auto-compounded, allowing your stake to grow organically. The APY depends on factors like linked Compute Resource Nodes (CRNs) and node scoring, ensuring a fair and dynamic experience. Aleph.im staking empowers you to control the controllers, shaping decentralized connectivity while earning rewards. Plus, it's non-custodial."," ",(0,n.jsx)(ed,{className:"text-main1",children:"Join us today!"})]})]}),(0,n.jsxs)(ec,{children:[(0,n.jsx)(em,{children:(0,n.jsx)(k,{nodes:i})}),(0,n.jsx)(ep,{children:(0,n.jsx)(eh,{children:(0,n.jsx)(J,{nodes:i})})})]})]})})}),(0,n.jsxs)(eu,{children:[(0,n.jsxs)(eg,{children:[(0,n.jsxs)(ex,{children:[(0,n.jsx)(o.mQ,{tabs:v,align:"left",selected:_,onTabChange:Z}),(0,n.jsx)(o.XZ,{label:"Ready to stake",checked:S,onChange:M,size:"xs",disabled:N})]}),(0,n.jsx)(o.oi,{value:j,name:"filter-ccn",placeholder:"Search me",onChange:A,icon:(0,n.jsx)(o.JO,{name:"search"})})]}),(0,n.jsxs)(ef,{children:[(0,n.jsx)(O.Z,{show:!E||!i}),E&&(0,n.jsx)(n.Fragment,{children:"user"===_?(0,n.jsx)(n.Fragment,{children:i&&w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R,{nodes:i,filteredNodes:w,accountBalance:a,account:t,handleStake:D,handleUnstake:B,showStakedAmount:!0,nodesIssues:b}),(0,n.jsx)(ey,{children:t?(null==y?void 0:y.length)?"":"You are not staking.":"Connect your wallet to see your stakes."})]}):(0,n.jsx)(n.Fragment,{children:"No data"})}):(0,n.jsx)(n.Fragment,{children:i&&(0,n.jsx)(R,{nodes:i,filteredNodes:r,accountBalance:a,account:t,handleStake:D,handleUnstake:B,nodesIssues:b,loadItemsDisabled:C,handleLoadItems:P,handleSortItems:I})})})]})]})]})};en.displayName="StakingPage";var ei=(0,s.memo)(en),es=(0,i.ZP)("h1").withConfig({displayName:"cmp___StyledH",componentId:"sc-ujps5p-0"})({marginBottom:"2rem"}),er=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-ujps5p-1"})({display:"flex",flexWrap:"wrap",alignItems:"flex-start",gap:"1.5rem","@media (min-width: 87.5rem)":{flexWrap:"nowrap"}}),el=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-ujps5p-2"})({flex:"1 1 auto",alignSelf:"stretch"}),eo=(0,i.ZP)("h2").withConfig({displayName:"cmp___StyledH2",componentId:"sc-ujps5p-3"})({marginBottom:"0px"}),ed=(0,i.ZP)("strong").withConfig({displayName:"cmp___StyledStrong",componentId:"sc-ujps5p-4"})({fontWeight:"700"}),ec=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-ujps5p-5"})({display:"flex",maxWidth:"100%",flex:"1 1 auto",flexWrap:"wrap",alignItems:"stretch",gap:"1.5rem","@media (min-width: 87.5rem)":{flex:"none",flexWrap:"nowrap"}}),em=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-ujps5p-6"})({maxWidth:"100%",flex:"1 1 auto","@media (min-width: 87.5rem)":{flex:"none"}}),ep=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-ujps5p-7"})({display:"flex",flex:"1 1 auto",flexWrap:"wrap",alignItems:"stretch",gap:"1.5rem","@media (min-width: 36rem)":{flexWrap:"nowrap"},"@media (min-width: 87.5rem)":{flex:"none"}}),eh=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-ujps5p-8"})({flex:"1 1 0%"}),eu=(0,i.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-ujps5p-9"})({marginTop:"3.5rem"}),eg=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-ujps5p-10"})({marginBottom:"2rem",display:"flex",flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"space-between",gap:"2.5rem","@media (min-width: 48rem)":{flexDirection:"row",alignItems:"flex-end"}}),ex=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-ujps5p-11"})({display:"flex",flexDirection:"column",flexWrap:"wrap",alignItems:"flex-start",gap:"2.5rem","@media (min-width: 36rem)":{flexDirection:"row",alignItems:"center",gap:"1rem"}}),ef=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-ujps5p-12"})({position:"relative"}),ey=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv10",componentId:"sc-ujps5p-13"})({marginLeft:"1rem",marginRight:"1rem",marginTop:"2.5rem",marginBottom:"2.5rem",textAlign:"center",opacity:"0.6"}),ew=ei}},function(e){e.O(0,[959,983,431,774,888,179],function(){return e(e.s=44994)}),_N_E=e.O()}]);