(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[265],{70805:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/earn/crn/[hash]",function(){return t(48833)}])},33378:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var i=t(85893),a=t(19521),r=t(67294);let s=a.ZP.div.withConfig({displayName:"styles__StyledDotIcon",componentId:"sc-1w2vi58-0"})(e=>{let{theme:n,$active:t}=e,i=t?n.color.main1:n.color.disabled2;return[{height:"0.75rem",width:"0.5rem"},(0,a.iv)(["background-color:",";"],i)]}),o=e=>{let{decentralization:n}=e,t=e=>(e+1)*.3;return(0,i.jsx)(d,{children:(0,i.jsx)(c,{children:Array.from({length:3},(e,a)=>(0,i.jsx)(s,{$active:n>=t(a)},a))})})};o.displayName="NodeDecentralization";var l=(0,r.memo)(o),d=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-sktw9k-0"})({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),c=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-sktw9k-1"})({display:"flex",alignItems:"stretch",gap:"0.125rem"})},67200:function(e,n,t){"use strict";t.d(n,{d:function(){return a}});var i=t(67294);function a(e){let{nodes:n}=e,t=(0,i.useMemo)(()=>{let e=n||Array.from({length:4},(e,n)=>({metricsData:{as_name:"Provider ".concat(n)}}));return e.reduce((e,n)=>{var t;let i=(null===(t=n.metricsData)||void 0===t?void 0:t.as_name)||"others";return e[i]=(e[i]||0)+1,e},{others:0})},[n]),a=(0,i.useMemo)(()=>Object.values(t).reduce((e,n)=>e+n,0),[t]),r=(0,i.useMemo)(()=>{let e=Object.entries(t).filter(e=>{let[n]=e;return"others"!==n}).sort((e,n)=>{let[,t]=e,[,i]=n;return i-t}),n=e.slice(0,3),i=e.slice(3),r=["others",t.others+i.reduce((e,n)=>{let[,t]=n;return e+t},0)];return[...n,r].map((e,n)=>{let[t,i]=e;return{tier:n+1,name:t,count:i,percentage:i/a,color:0===n?"error":1===n?"main2":2===n?"main0":"main1"}})},[t,a]);return{total:a,buckets:t,top:r}}},96264:function(e,n,t){"use strict";t.d(n,{O:function(){return s}});var i=t(67294),a=t(48107),r=t(94461);function s(e){let{nodes:n}=e,[t]=(0,r.mr)(),{account:s}=t.connection,o=(0,i.useMemo)(()=>new a.B(s),[s]),[l,d]=(0,i.useState)({}),[c,m]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async function(){n&&(await Promise.allSettled(n.map(async e=>{let n=await o.getCRNspecs(e);d(t=>({...t,[e.hash]:{data:n,loading:!1,error:void 0}}))})),m(!1))})()},[o,n]),{specs:l,loading:c}}},58193:function(e,n,t){"use strict";t.d(n,{h:function(){return s}});var i=t(94461),a=t(67294),r=t(69797);function s(){let{nodes:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n]=(0,i.mr)(),{entities:t}=n.ccns,{userNodes:s}=(0,r.M)({nodes:e||t}),o=(0,a.useMemo)(()=>null==s?void 0:s[0],[s]);return{userNode:o}}},48833:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eP}});var i=t(85893),a=t(19521),r=t(67294),s=t(9008),o=t.n(s),l=t(94461),d=t(48107),c=t(11163),m=t.n(c),u=t(15457),h=t(58193),v=t(10159),p=t(87536),f=t(56312),w=t(31515),x=t(91421),g=t(73384),y=t(67200),C=t(96264),_=t(33358),j=t(34853),N=t(47630),b=t(1218),S=t(41664),P=t.n(S),T=t(68390),I=t(8978),D=t(33378),k=t(77849),O=t(69867),R=t(25675),Z=t.n(R),E=t(7954),M=t(87931),A=t(11505),z=t(90709);let B=e=>{var n,t,a;let{theme:r,node:s,nodesOnSameASN:o,baseLatency:l,lastMetricsCheck:c,calculatedRewards:m,creationDate:u,isOwner:h,rewardCtrl:v,streamRewardCtrl:p,addressCtrl:f,asnTier:x,nodeSpecs:g,nodeIssue:y,createInstanceUrl:C,isLinked:N,isLinkableByUser:b,isUnlinkableByUser:S,handleLink:R,handleUnlink:B}=e;return(0,i.jsx)(L,{children:(0,i.jsxs)(U,{children:[(0,i.jsxs)(F,{children:[(0,i.jsxs)(T.ZP,{title:"GENERAL INFO",children:[(0,i.jsx)(I.Z,{status:null==s?void 0:s.status}),(0,i.jsx)(T.HC,{name:"NAME",value:null==s?void 0:s.name}),(0,i.jsx)(T.HC,{name:"ASN",value:null==s?void 0:null===(n=s.metricsData)||void 0===n?void 0:n.as_name}),(0,i.jsx)(T.HC,{name:"OWNER",value:(0,i.jsx)(O.Z,{href:(0,j.tz)({address:null==s?void 0:s.owner}),isOwner:!1,textToCopy:null==s?void 0:s.owner,children:(null==s?void 0:s.owner)&&(0,j.zN)(null==s?void 0:s.owner)}),big:!0}),(0,i.jsx)(T.HC,{name:"REWARD ADDRESS",value:(0,i.jsx)(k.Z,{...v.field,...v.fieldState,placeholder:"reward address",isOwner:h,children:(0,i.jsx)(O.Z,{href:(0,j.tz)({tokenAddress:v.field.value}),isOwner:h,textToCopy:v.field.value,children:v.field.value&&(0,j.zN)(v.field.value)})}),big:!0}),(0,i.jsx)(T.HC,{name:"STREAM REWARD ADDRESS",value:(0,i.jsx)(k.Z,{...p.field,...p.fieldState,placeholder:"PAYG reward address",isOwner:h,children:(0,i.jsx)(O.Z,{href:(0,j.gl)({tokenAddress:p.field.value}),isOwner:h,textToCopy:p.field.value,children:p.field.value&&(0,j.zN)(p.field.value)})}),big:!0}),(0,i.jsx)(T.HC,{name:"ADDRESS",value:(0,i.jsx)(k.Z,{...f.field,...f.fieldState,placeholder:"address",isOwner:h,children:(0,i.jsx)(O.Z,{href:null==s?void 0:s.address,isOwner:h,textToCopy:null==s?void 0:s.address,children:null==s?void 0:s.address})}),big:!0})]}),(0,i.jsxs)(T.ZP,{title:"HARDWARE",children:[(0,i.jsx)(T.HC,{name:"CPU",value:null==g?void 0:g.properties.cpu.vendor}),(0,i.jsx)(T.HC,{name:"CPU ARCHITECTURE",value:null==g?void 0:g.properties.cpu.architecture}),(0,i.jsx)(T.HC,{name:"CPU COUNT",value:null==g?void 0:g.cpu.count}),(0,i.jsx)(T.HC,{name:"CPU FREQUENCY",value:"".concat((((null==g?void 0:g.cpu.core_frequencies.max)||0)/1024).toFixed(2)," GHz")}),(0,i.jsx)(T.HC,{name:"RAM",value:(0,j.eB)(null==g?void 0:g.mem.total_kB,"KiB")}),(0,i.jsx)(T.HC,{name:"HDD",value:(0,j.eB)(null==g?void 0:g.disk.total_kB,"KiB")}),(0,i.jsxs)(W,{children:[(0,i.jsx)(M.Z,{href:C||"#",target:"_blank",kind:"neon",variant:"primary",size:"md",disabled:!C,children:(0,i.jsxs)(i.Fragment,{children:["Create Instance",void 0===y&&(0,i.jsx)(A.g4,{width:"1em",height:"1em",color:r.color.background})]})}),!C&&(0,i.jsx)(J,{className:"fs-10",children:y?(0,i.jsx)(w.u,{my:"top-center",at:"bottom-center",content:(0,i.jsxs)("div",{className:"tp-body1 fs-12",children:[(0,i.jsx)("div",{className:"tp-body3 fs-16",children:"Why is my node unavailable?"}),(0,i.jsx)("div",{children:"A node may be not eligible for PAYG for the following reasons:"}),(0,i.jsxs)(G,{children:[y===d.r.IPV6&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"IPv6 Egress Issue:"})," The node's compute resource (CRN) is unable to establish an IPv6 egress connection."]}),y===d.r.MinSpecs&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Minimum Specifications:"})," The node does not meet the required minimum hardware or software specifications."]}),y===d.r.Version&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Version Compatibility:"})," Only nodes with version 0.4.0 or higher are eligible for selection."]}),y===d.r.RewardAddress&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Stream Reward Configuration:"})," ","The node lacks a configured stream reward address, which is necessary for operation."]})]})]}),children:(0,i.jsxs)(q,{children:["Not eligible for pay-as-you-go (PAYG)",(0,i.jsx)(Y,{name:"exclamation-circle"})]})}):(0,i.jsx)(V,{children:"Not eligible for pay-as-you-go (PAYG)"})})]})]})]}),(0,i.jsxs)(X,{children:[(0,i.jsxs)(T.ZP,{title:"REWARD INDICATORS",children:[(0,i.jsx)(T.HC,{name:"NODES ON ASN",value:(0,i.jsxs)($,{className:x&&"text-".concat(x.color),children:[o,!!x&&(0,i.jsx)(w.JO,{name:"hexagon-exclamation",color:x.color})]})}),(0,i.jsx)(T.HC,{name:"VERSION",value:null==s?void 0:null===(t=s.metricsData)||void 0===t?void 0:t.version}),(0,i.jsx)(T.HC,{name:"BASE LATENCY",value:l}),(0,i.jsx)(T.HC,{name:"LAST CHECK",value:c})]}),(0,i.jsx)(T.ZP,{title:"POTENTIAL REWARD",children:(0,i.jsx)(T.HC,{name:"ESTIMATED MONTHLY REWARD",value:(0,i.jsx)(E.Z,{value:m})})})]}),(0,i.jsxs)(K,{children:[(0,i.jsx)(T.ZP,{title:"LINKED CORE NODE",children:(0,i.jsx)(Q,{children:N?(0,i.jsxs)(i.Fragment,{children:[(null==s?void 0:s.parentData)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z.Rr,{$score:s.parentData.score}),(0,i.jsx)(P(),{href:"/earn/ccn/".concat(s.parentData.hash),legacyBehavior:!0,children:(0,i.jsx)(ei,{hash:s.parentData.hash,name:s.parentData.name,picture:s.parentData.picture,apiServer:_.pf,ImageCmp:Z()})})]}),S&&(0,i.jsx)("button",{onClick:B,children:(0,i.jsx)(w.JO,{name:"trash",color:"error"})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z.Rr,{}),(0,i.jsx)(ee,{}),(0,i.jsx)(en,{className:"fs-10",children:b?(0,i.jsx)(w.zx,{color:"main2",size:"md",kind:"neon",variant:"textOnly",onClick:R,children:(0,i.jsxs)("div",{children:[(0,i.jsx)(et,{name:"link"})," link now"]})}):(0,i.jsx)(i.Fragment,{children:"not linked"})})]})})}),(0,i.jsxs)(T.ZP,{title:"DECENTRALIZED SCORE",children:[(0,i.jsxs)(ea,{className:x&&"text-".concat(x.color),children:[(0,i.jsx)(D.Z,{decentralization:(null==s?void 0:null===(a=s.scoreData)||void 0===a?void 0:a.decentralization)||0}),!!x&&(0,i.jsx)(w.JO,{name:"hexagon-exclamation",color:x.color})]}),!!x&&(0,i.jsxs)("p",{className:"tp-body3 fs-10",children:["There are ",o," nodes on this ASN. Please consider to migrate your node to a different ASN."]})]}),(0,i.jsx)(T.ZP,{title:"PERFORMANCE",children:(0,i.jsx)(T.HC,{name:"CREATION TIME",value:u})})]})]})})};B.displayName="OverviewTabContent";var H=(0,r.memo)(B),L=(0,a.ZP)("section").withConfig({displayName:"OverviewTabContent___StyledSection",componentId:"sc-1mtmweg-0"})({marginTop:"2rem"}),U=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv",componentId:"sc-1mtmweg-1"})({display:"flex",flexWrap:"wrap",gap:"2.25rem"}),F=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv2",componentId:"sc-1mtmweg-2"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),W=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv3",componentId:"sc-1mtmweg-3"})({paddingTop:"1.5rem",textAlign:"center"}),J=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv4",componentId:"sc-1mtmweg-4"})({marginTop:"1rem"}),G=(0,a.ZP)("ul").withConfig({displayName:"OverviewTabContent___StyledUl",componentId:"sc-1mtmweg-5"})({marginTop:"1rem",marginBottom:"1rem",listStyleType:"disc",paddingLeft:"1.5rem"}),q=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv5",componentId:"sc-1mtmweg-6"})({display:"flex",cursor:"help",alignItems:"center",justifyContent:"center"}),Y=(0,a.ZP)(w.JO).withConfig({displayName:"OverviewTabContent___StyledIcon",componentId:"sc-1mtmweg-7"})({marginLeft:"0.5rem"}),V=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv6",componentId:"sc-1mtmweg-8"})({textAlign:"center"}),X=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv7",componentId:"sc-1mtmweg-9"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),$=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv8",componentId:"sc-1mtmweg-10"})({display:"flex",alignItems:"center",gap:"0.75rem"}),K=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv9",componentId:"sc-1mtmweg-11"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),Q=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv10",componentId:"sc-1mtmweg-12"})({display:"flex",alignItems:"center",gap:"0.75rem"}),ee=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv11",componentId:"sc-1mtmweg-13"})({height:"1.5rem",width:"1.5rem",borderRadius:"9999px",backgroundColor:"#C4C4C433"}),en=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv12",componentId:"sc-1mtmweg-14"})({lineHeight:"1rem"}),et=(0,a.ZP)(w.JO).withConfig({displayName:"OverviewTabContent___StyledIcon2",componentId:"sc-1mtmweg-15"})({height:"0.875rem",width:"0.875rem"}),ei=(0,a.ZP)(w.tJ).withConfig({displayName:"OverviewTabContent___StyledNodeName",componentId:"sc-1mtmweg-16"})({marginRight:"auto",width:"auto",cursor:"pointer"}),ea=(0,a.ZP)("div").withConfig({displayName:"OverviewTabContent___StyledDiv13",componentId:"sc-1mtmweg-17"})({display:"flex",alignItems:"center",gap:"0.75rem"});let er=a.ZP.a.withConfig({displayName:"styles__StyledExternalLink",componentId:"sc-1rltozf-0"})(["",""],e=>{let{theme:n,$color:t="white",$typo:i,$underline:r=!1}=e;return(0,a.iv)(["color:",";text-decoration:",";",""],n.color[t],r?"underline":"none",i?(0,w.pX)(i):"")}),es=e=>{let{text:n,href:t,color:a,typo:r,underline:s,...o}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(er,{href:t,target:"_blank",$color:a,$typo:r,$underline:s,...o,children:[n||t,(0,i.jsx)(el,{name:"square-up-right"})]})})};es.displayName="ExternalLink";var eo=(0,r.memo)(es),el=(0,a.ZP)(w.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-11m8lmb-0"})({marginLeft:"0.375rem"}),ed=t(92064),ec=t(81287);class em{async get(e){try{let n=await this.sdkClient.getMessage(e);return n}catch(e){throw ec.Z.RequestFailed(e)}}async getAll(e){try{let n=await this.sdkClient.getMessages(e);return n}catch(e){throw ec.Z.RequestFailed(e)}}async del(e){try{if(!(this.sdkClient instanceof ed.x))throw ec.Z.InvalidAccount;let n=await this.sdkClient.forget({hashes:[e.item_hash],channel:e.channel});return n}catch(e){throw ec.Z.RequestFailed(e)}}constructor(e,n=_.Nr,t=e?new ed.x(e,_.pf):new ed.O(_.pf)){this.account=e,this.channel=n,this.sdkClient=t}}var eu=t(92975),eh=t(18210);let ev=e=>{let{isOwner:n,documentName:t,documentCID:a,documentLink:s,termsAndConditionsCtrl:o,isLoadingHistoryMessages:l,policiesHistory:d,fileValue:c,removePoliciesDisabled:m,isCurrentVersion:u,handleFileChange:h,handleDownloadFile:v,handleRemovePolicies:p}=function(e){let{node:n,termsAndConditionsCtrl:t,handleRemovePolicies:i,...a}=e,{field:{onChange:s,value:o}}=t,[l,d]=(0,r.useState)(),[c,m]=(0,r.useState)(!0),[u,h]=(0,r.useState)(),[v,p]=(0,r.useState)(!0),f=(0,r.useMemo)(()=>new em,[]),w=(0,r.useMemo)(()=>new eh.p,[]),x=(0,r.useMemo)(()=>{if(!u)return;let e=null==u?void 0:u.entries().next().value;if(e)return e[1]},[u]),g=(0,r.useMemo)(()=>v?"":(null==x?void 0:x.name)||" ",[v,x]),y=(0,r.useMemo)(()=>v?"":(null==x?void 0:x.cid)||" ",[v,x]),C=(0,r.useMemo)(()=>v?"":x?"".concat(_.pf,"/api/v0/storage/raw/").concat(null==x?void 0:x.cid):" ",[v,x]),j=(0,r.useMemo)(()=>!(null==u?void 0:u.size),[u]),N=(0,r.useMemo)(()=>{if(o instanceof File)return o},[o]),b=(0,r.useCallback)(e=>!!x&&e===x,[x]),S=(0,r.useCallback)(e=>{let n=Array.isArray(e)?e[0]:e;s(n)},[s]),P=(0,r.useCallback)(async(e,n)=>{let t=await w.downloadFile(e),i=window.URL.createObjectURL(t),a=document.createElement("a");a.href=i,a.download=n,document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(i)},[w]);return(0,r.useEffect)(()=>{let e=async()=>{if(m(!0),!f||!n)return d(void 0);try{let{messages:e}=await (null==f?void 0:f.getAll({messageTypes:[eu.Cs.post],refs:[n.hash],addresses:[n.owner]}));d(e)}catch(e){console.error(e)}finally{m(!1)}};e()},[f,n]),(0,r.useEffect)(()=>{let e=async()=>{if(p(!0),c||!f||!l)return h(void 0);try{let i=new Map;for(let a of l){var e,n,t;let r;let s=null===(e=a.content)||void 0===e?void 0:null===(n=e.content)||void 0===n?void 0:n.details.terms_and_conditions;if(!s)break;try{let{content:e}=await (null==f?void 0:f.get(s));r=e}catch(e){console.error(e)}r&&i.set(s,{time:new Date(1e3*a.content.time),cid:r.item_hash,name:null===(t=r.metadata)||void 0===t?void 0:t.name})}let a=new Map(Array.from(i).sort((e,n)=>{let[,{time:t}]=e,[,{time:i}]=n;return i.getTime()-t.getTime()}));h(a)}catch(e){console.error(e)}finally{p(!1)}};e()},[l,c,f]),{documentName:g,documentCID:y,documentLink:C,policiesHistory:u,termsAndConditionsCtrl:t,isLoadingHistoryMessages:v,fileValue:N,removePoliciesDisabled:j,isCurrentVersion:b,handleFileChange:S,handleDownloadFile:P,handleRemovePolicies:i,...a}}(e);return(0,i.jsx)(ef,{children:(0,i.jsxs)(w.X2,{count:1,xl:5,xlGap:"2rem",children:[(0,i.jsxs)(w.JX,{span:3,children:[(0,i.jsxs)(T.ZP,{title:"CURRENT VERSION",children:[(0,i.jsx)(T.HC,{name:"DOCUMENT NAME",value:t}),(0,i.jsx)(T.HC,{name:"CID",value:a}),(0,i.jsx)(T.HC,{name:"LINK",value:s})]}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ew,{kind:"flat",variant:"secondary",size:"md",color:"error",onClick:p,disabled:m,children:[(0,i.jsx)(w.JO,{name:"trash",color:m?"":"error",size:"lg"}),"remove policies"]}),(0,i.jsx)(w.S2,{...o.field,...o.fieldState,value:c,onChange:h}),(0,i.jsx)(ex,{className:"tp-info text-base",children:"Max. file size is 100 MB"})]})]}),(0,i.jsxs)(w.JX,{span:2,children:[(0,i.jsx)(eg,{className:"tp-h7",children:"History"}),l?(0,i.jsx)(w.$j,{}):d&&(0,i.jsx)("ol",{children:Array.from(d).map((e,n)=>{let[,t]=e;return(0,i.jsxs)(ey,{children:[(0,i.jsx)(eC,{className:"fs-12",children:u(t)?"Now":t.time.toLocaleDateString()}),(0,i.jsx)(eo,{text:t.name||(0,w.bs)(t.cid,12,6),href:"#",onClick:()=>v(t.cid,t.name||t.cid),target:"_self"}),n<d.size-1&&(0,i.jsx)(e_,{})]},t.cid)})})]})]})})};ev.displayName="PoliciesTabContent";var ep=(0,r.memo)(ev),ef=(0,a.ZP)("section").withConfig({displayName:"PoliciesTabContent___StyledSection",componentId:"sc-vd5cwz-0"})({marginTop:"2rem"}),ew=(0,a.ZP)(w.zx).withConfig({displayName:"PoliciesTabContent___StyledButton",componentId:"sc-vd5cwz-1"})({marginTop:"2rem !important",marginBottom:"2rem !important"}),ex=(0,a.ZP)("div").withConfig({displayName:"PoliciesTabContent___StyledDiv",componentId:"sc-vd5cwz-2"})({marginTop:"0.5rem",width:"100%",paddingRight:"1.75rem",textAlign:"right",opacity:"0.7"}),eg=(0,a.ZP)("div").withConfig({displayName:"PoliciesTabContent___StyledDiv2",componentId:"sc-vd5cwz-3"})({marginTop:"2rem",marginBottom:"2rem"}),ey=(0,a.ZP)("li").withConfig({displayName:"PoliciesTabContent___StyledLi",componentId:"sc-vd5cwz-4"})({marginTop:"0.5rem"}),eC=(0,a.ZP)("div").withConfig({displayName:"PoliciesTabContent___StyledDiv3",componentId:"sc-vd5cwz-5"})({marginBottom:"0.125rem",fontWeight:"400",fontStyle:"italic",opacity:"0.4"}),e_=(0,a.ZP)("div").withConfig({displayName:"PoliciesTabContent___StyledDiv4",componentId:"sc-vd5cwz-6"})({position:"relative",marginLeft:"0.25rem",marginTop:"0.5rem",height:"2rem",borderInlineStartWidth:"1px"});let ej=()=>{let{theme:e,node:n,nodesOnSameASN:t,baseLatency:s,lastMetricsCheck:S,calculatedRewards:P,creationDate:T,nameCtrl:I,descriptionCtrl:D,bannerCtrl:k,pictureCtrl:O,isOwner:R,isDirty:Z,rewardCtrl:E,streamRewardCtrl:M,addressCtrl:A,termsAndConditionsCtrl:z,asnTier:B,nodeSpecs:L,nodeIssue:U,createInstanceUrl:F,isLinked:W,isLinkableByUser:J,isUnlinkableByUser:G,tabId:q,setTabId:Y,tabs:V,handleRemovePolicies:X,handleRemove:$,handleSubmit:K,handleLink:Q,handleUnlink:ee}=function(){let e=(0,a.Fg)(),n=(0,c.useRouter)(),{hash:t}=n.query,[i]=(0,l.mr)(),{account:s}=i.connection,{entities:o}=i.crns,{node:b}=function(e){let{hash:n}=e,[t]=(0,l.mr)(),{entities:i}=t.crns,a=(0,r.useMemo)(()=>{if(i)return i.filter(e=>e.hash===n)},[i,n]),[s]=a||[];return{node:s}}({hash:t}),{userNode:S}=(0,h.h)(),P=(0,r.useMemo)(()=>new d.B(s),[s]),T=(0,r.useMemo)(()=>new N.S(s),[s]),I=(0,r.useMemo)(()=>b?T.CRNRewardsPerDay(b)*(365/12):0,[b,T]),D=(0,u._)({node:b,nodes:o}),[k,O]=(0,r.useState)("overview"),R=(0,r.useMemo)(()=>[{id:"overview",name:"Overview"},{id:"policies",name:"Policies"}],[]),{isLinked:Z,isLinkableByUser:E,isUnlinkableByUser:M,handleLink:A,handleUnlink:z}=(0,g.i)(),B=(0,r.useMemo)(()=>b&&Z(b),[Z,b]),H=(0,r.useMemo)(()=>b&&S&&E(b,S),[E,b,S]),L=(0,r.useMemo)(()=>b&&M(b),[M,b]),U=(0,r.useCallback)(async()=>{if(!b||!S)return!1;let e=await A(b.hash,S.hash);return e&&S&&n.replace("/earn/ccn/".concat(S.hash)),e},[A,n,b,S]),F=(0,r.useCallback)(async()=>{if(!b)return!1;let e=await z(b.hash);return e&&S&&n.replace("/earn/ccn/".concat(null==S?void 0:S.hash)),e},[z,n,b,S]),{top:W}=(0,y.d)({nodes:o}),J=W.find(e=>{var n;return e.name===(null==b?void 0:null===(n=b.metricsData)||void 0===n?void 0:n.as_name)}),G=(0,r.useMemo)(()=>{if(b)return[b]},[b]),{specs:q}=(0,C.O)({nodes:G}),{ips:Y}=function(e){let{nodes:n}=e,[t]=(0,l.mr)(),{account:i}=t.connection,a=(0,r.useMemo)(()=>new d.B(i),[i]),[s,o]=(0,r.useState)({}),[c,m]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async function(){n&&(await Promise.allSettled(n.filter(e=>!a.isStreamPaymentNotSupported(e)).map(async e=>{if(s[e.hash])return;let n=await a.getCRNips(e);o(t=>({...t,[e.hash]:{data:n,loading:!1,error:void 0}}))})),m(!1))})()},[s,a,n]),{ips:s,loading:c}}({nodes:G}),V=(0,r.useMemo)(()=>({cpu:1,ram:(0,j.Fx)(2,{from:"GiB",to:"MiB"}),storage:(0,j.Fx)(20,{from:"GiB",to:"MiB"})}),[]),X=(0,r.useMemo)(()=>{if(G)return G.reduce((e,n)=>{var t,i;let a=P.isStreamPaymentNotSupported(n);if(a)return e[n.hash]=a,e;let r=null===(t=q[n.hash])||void 0===t?void 0:t.data;if(r){let t=P.validateMinNodeSpecs(V,r);if(!t)return e[n.hash]=d.r.MinSpecs,e}let s=null===(i=Y[n.hash])||void 0===i?void 0:i.data;if(s){let t=!!s.vm;if(!t)return e[n.hash]=d.r.IPV6,e}return r&&s&&(e[n.hash]=d.r.Valid),e},{})},[G,P,q,Y,V]),$=(0,r.useMemo)(()=>{var e;if(b)return null===(e=q[b.hash])||void 0===e?void 0:e.data},[q,b]),K=(0,r.useMemo)(()=>{if(b)return null==X?void 0:X[b.hash]},[X,b]),Q=(0,r.useMemo)(()=>{if(b)return void 0===K||K?void 0:"".concat(_.RG,"?crn=").concat(b.hash)},[b,K]),ee=(0,r.useMemo)(()=>({hash:null==b?void 0:b.hash,name:null==b?void 0:b.name,description:null==b?void 0:b.description,reward:null==b?void 0:b.reward,stream_reward:null==b?void 0:b.stream_reward,authorized:null==b?void 0:b.authorized,locked:null==b?void 0:b.locked,registration_url:null==b?void 0:b.registration_url,picture:null==b?void 0:b.picture,banner:null==b?void 0:b.banner,address:null==b?void 0:b.address,terms_and_conditions:null==b?void 0:b.terms_and_conditions}),[b]),en=function(e){let{defaultValues:n}=e,[t,i]=(0,l.mr)(),{account:a}=t.connection,{entities:s}=t.crns,o=(0,w.lm)(),c=(0,r.useMemo)(()=>new d.B(a),[a]),m=(0,r.useCallback)(async e=>{if(!c)throw Error("Manager not ready");if(!a)throw Error("Invalid account");let[,n]=await c.updateComputeResourceNode(e),t=null==s?void 0:s.find(e=>e.hash===n.hash),i=function(e,n){let t={...e||{},...n,virtual:Date.now()};return t}(t,n);return i},[a,c,s]),u=(0,r.useCallback)(async e=>{if(!o)throw Error("Notification not ready");o.add({variant:"success",title:"Success",text:'Your node "'.concat(e.hash,'" was updated successfully.')}),i(new x.Wy({name:"crns",entities:[e]}))},[i,o]),{control:h,handleSubmit:g,formState:{errors:y,isDirty:C}}=(0,v.c)({defaultValues:n,onSubmit:m,onSuccess:u,resolver:(0,f.F)(d.B.updateCRNSchema),readyDeps:[n]}),_=(0,p.qo)({control:h}),j=(0,p.bc)({control:h,name:"name"}),N=(0,p.bc)({control:h,name:"description"}),b=(0,p.bc)({control:h,name:"address"}),S=(0,p.bc)({control:h,name:"picture"}),P=(0,p.bc)({control:h,name:"banner"}),T=(0,p.bc)({control:h,name:"reward"}),I=(0,p.bc)({control:h,name:"stream_reward"}),D=(0,p.bc)({control:h,name:"authorized"}),k=(0,p.bc)({control:h,name:"locked"}),O=(0,p.bc)({control:h,name:"registration_url"}),R=(0,p.bc)({control:h,name:"terms_and_conditions"});return{values:_,control:h,nameCtrl:j,descriptionCtrl:N,addressCtrl:b,pictureCtrl:S,bannerCtrl:P,rewardCtrl:T,streamRewardCtrl:I,authorizedCtrl:D,lockedCtrl:k,registrationUrlCtrl:O,termsAndConditionsCtrl:R,errors:y,isDirty:C,handleSubmit:g}}({defaultValues:ee}),et=(0,r.useCallback)(async()=>{await P.updateComputeResourceNode({...en.values,terms_and_conditions:""}),m().reload()},[en.values,P]);return{theme:e,nodes:o,node:b,userNode:S,calculatedRewards:I,asnTier:J,nodeSpecs:$,nodeIssue:K,createInstanceUrl:Q,isLinked:B,isLinkableByUser:H,isUnlinkableByUser:L,tabs:R,tabId:k,setTabId:O,handleRemovePolicies:et,handleLink:U,handleUnlink:F,...en,...D}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"Aleph Cloud | CRN Detail"}),(0,i.jsx)("meta",{name:"description",content:"Aleph Cloud Compute Resource Node"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,i.jsx)("section",{children:(0,i.jsx)(b.Z,{node:n,nameCtrl:I,descriptionCtrl:D,bannerCtrl:k,pictureCtrl:O,isOwner:R})}),R&&(0,i.jsxs)(eb,{children:[(0,i.jsxs)(w.zx,{kind:"flat",variant:"textOnly",size:"md",color:"error",onClick:$,children:[(0,i.jsx)(w.JO,{name:"trash",color:"error",size:"lg"}),"remove node"]}),(0,i.jsx)(w.zx,{kind:"neon",variant:"primary",size:"md",color:"main2",onClick:K,disabled:!Z,children:"save changes"})]}),(0,i.jsx)(eS,{children:(0,i.jsx)(w.mQ,{selected:q,tabs:V,onTabChange:Y})}),"overview"===q?(0,i.jsx)(H,{theme:e,node:n,nodesOnSameASN:t,baseLatency:s,lastMetricsCheck:S,calculatedRewards:P,creationDate:T,isOwner:R,rewardCtrl:E,streamRewardCtrl:M,addressCtrl:A,asnTier:B,nodeSpecs:L,nodeIssue:U,createInstanceUrl:F,isLinked:W,isLinkableByUser:J,isUnlinkableByUser:G,handleLink:Q,handleUnlink:ee}):"policies"===q?(0,i.jsx)(ep,{node:n,isOwner:R,termsAndConditionsCtrl:z,handleRemovePolicies:X}):""]})};ej.displayName="ComputeResourceNodeDetailPage";var eN=(0,r.memo)(ej),eb=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-b9jk28-0"})({marginTop:"2rem",marginBottom:"2rem",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"1.75rem"}),eS=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-b9jk28-1"})({marginTop:"2rem",marginBottom:"2rem",display:"flex"}),eP=eN}},function(e){e.O(0,[959,312,505,85,774,888,179],function(){return e(e.s=70805)}),_N_E=e.O()}]);