(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{32502:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/earn/crn/new",function(){return n(3386)}])},87931:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(85893),i=n(41664),o=n.n(i),a=n(7251);function s(e){let{href:t,variant:n,color:i,kind:s,size:l,children:c}=e;return(0,r.jsx)(o(),{href:t,passHref:!0,legacyBehavior:!0,children:(0,r.jsx)(a.zx,{as:"a",variant:n||"secondary",color:i||"main0",kind:s||"neon",size:l||"regular",children:c})})}},58833:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(85893),i=n(19521),o=n(7251);let a=(0,i.ZP)(o.zx).attrs(e=>({...e,forwardedAs:"a",kind:"neon",variant:"text-only",color:"main0"})).withConfig({displayName:"styles__StyledExternalLinkButton",componentId:"sc-16jaolm-0"})([""]);function s(e){let{children:t,href:n,size:i="big",...o}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(a,{href:n,size:i,...o,target:"_blank",children:[t||n,(0,r.jsx)(l,{name:"square-up-right"})]})})}var l=(0,i.ZP)(o.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-mpznlq-0"})({marginLeft:"0.625rem"})},11912:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(85893),i=n(19521),o=n(67294),a=n(7251);let s=(0,i.ZP)(a.zx).attrs(e=>({...e,forwardedAs:"span",onClick:e=>e.preventDefault(),kind:"neon",size:"big",variant:"text-only",color:"main0"})).withConfig({displayName:"styles__StyledInfoTooltipButton",componentId:"sc-1nmv0rk-0"})(()=>[{cursor:"help !important"}]);function l(e){let{children:t,tooltipContent:n,plain:i,align:s="right",vAlign:l="center",...u}=e,[f,h]=(0,o.useState)(!1);(0,o.useEffect)(()=>{h(!0)},[]);let x=(0,o.useRef)(null),g=(0,a._K)("md"),y=(0,r.jsx)(c,{name:"info-circle",$_css:["left"===s?{order:"-1"}:"","top"===l?{marginBottom:"0.5rem"}:""]});return(0,r.jsxs)(r.Fragment,{children:[i?(0,r.jsxs)(d,{ref:x,children:[t,y]}):(0,r.jsxs)(m,{ref:x,children:[t,y]}),f&&(0,r.jsx)(p,{...u,targetRef:x,content:n,$_css2:g?{position:"fixed !important",left:"0px !important",top:"0px !important",zIndex:"20 !important",margin:"1.5rem",height:"calc(100% - 3rem) !important",width:"calc(100% - 3rem) !important",maxWidth:"100% !important",transform:"none !important"}:{}})]})}var c=(0,i.ZP)(a.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-15p503-0"})(["",""],e=>e.$_css),d=(0,i.ZP)("span").withConfig({displayName:"cmp___StyledSpan",componentId:"sc-15p503-1"})({display:"inline-flex",cursor:"help",alignItems:"center",gap:"0.625rem"}),m=(0,i.ZP)(s).withConfig({displayName:"cmp___StyledStyledInfoTooltipButton",componentId:"sc-15p503-2"})({display:"inline-flex",alignItems:"center",gap:"0.625rem"}),p=(0,i.ZP)(a.u).withConfig({displayName:"cmp___StyledTooltip",componentId:"sc-15p503-3"})(["",""],e=>e.$_css2)},43291:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(85893),i=n(67294),o=n(19521);let a=o.ZP.form.withConfig({displayName:"styles__StyledForm",componentId:"sc-1c33mus-0"})(["",""],{display:"flex",flex:"1 1 0%",flexDirection:"column",gap:"2rem"});var s=n(7251);let l=e=>{let{children:t,onSubmit:n,errors:i,...o}=e;return(0,r.jsxs)(a,{onSubmit:n,noValidate:!0,...o,children:[t,(0,r.jsx)("div",{children:(null==i?void 0:i.root)&&Object.values(i.root).map(e=>(0,r.jsx)(s.Xq,{error:e},e+""))})]})};var c=(0,i.memo)(l)},78512:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(67294),i=n(11163),o=n(94461);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",[t]=(0,o.mr)(),n=(0,i.useRouter)();(0,r.useEffect)(()=>{t.account||n.replace(e)})}},10159:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var r=n(7251),i=n(67294),o=n(87536),a=n(1604);function s(e){let{onSubmit:t,onSuccess:n,onError:s,...l}=e,c=(0,o.cI)(l),[d,m]=(0,i.useState)({data:void 0,error:void 0,loading:!1}),[p,{onLoad:u,onSuccess:f,onError:h}]=(0,r.g7)({flushData:!0,state:d,setState:m,onSuccess:n,onError:s}),x=(0,i.useCallback)(async e=>{try{u();let n=await t(e);f(n)}catch(t){let e=t instanceof a.jm?Error("Validation error, check highlighted form fields"):(null==t?void 0:t.cause)||t;c.setError("root.serverError",{...e,message:null==e?void 0:e.message}),h(e)}},[c,h,u,t,f]),g=(0,i.useCallback)(async e=>{let t;if(console.log(e),!t){let n=function e(t){let[n]=Object.entries(t);if(!n)return;let[r,i]=n;if(Array.isArray(i)){let t=i[i.length-1];return e(t)}return[r,i]}(e);if(n){let[e,r]=n,i="string"==typeof r?r:(null==r?void 0:r.message)?": ".concat(r.message):(null==r?void 0:r.type)?': "'.concat(null==r?void 0:r.type,'" validation not satisfied'):"";t=Error('Error on field "'.concat(e,'"').concat(i))}}t||(t=Error("Validation error")),h(t)},[h]),y=(0,i.useMemo)(()=>c.handleSubmit(x,g),[c,x,g]);return{...c,requestState:p,handleSubmit:y}}},3386:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var r=n(85893),i=n(19521),o=n(67294),a=n(9008),s=n.n(a),l=n(43291),c=n(7251),d=n(94461),m=n(11163),p=n(78512),u=n(10159),f=n(87536),h=n(56312),x=n(48107);let g={name:"",address:""};var y=n(11912),_=n(58833),v=n(87931);let j=()=>{let{nameCtrl:e,addressCtrl:t,errors:n,handleSubmit:i}=function(){(0,p.Z)();let e=(0,m.useRouter)(),[t]=(0,d.mr)(),{account:n}=t.account,r=(0,c.lm)(),i=(0,o.useMemo)(()=>new x.B(n),[n]),a=(0,o.useCallback)(async e=>{if(!i)throw Error("Manager not ready");let t=await i.newComputeResourceNode(e);return t},[i]),s=(0,o.useCallback)(async t=>{if(!r)throw Error("Notification not ready");r.add({variant:"success",title:"Success",text:'Your node "'.concat(t,'" was created successfully.')}),e.replace("/earn/crn/".concat(t))},[r,e]),{control:l,handleSubmit:y,formState:{errors:_}}=(0,u.c)({defaultValues:g,onSubmit:a,onSuccess:s,resolver:(0,h.F)(x.B.newCRNSchema)}),v=(0,f.qo)({control:l}),j=(0,f.bc)({control:l,name:"name"}),w=(0,f.bc)({control:l,name:"address"});return{values:v,control:l,nameCtrl:j,addressCtrl:w,errors:_,handleSubmit:y}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"Aleph.im | Create CRN"}),(0,r.jsx)("meta",{name:"description",content:"Aleph.im Create Compute Resource Node"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,r.jsx)("section",{children:(0,r.jsx)(b,{className:"tp-h5",children:"Create compute resource node"})}),(0,r.jsxs)(N,{onSubmit:i,errors:n,children:[(0,r.jsxs)(S,{children:[(0,r.jsx)(c.NP,{as:"h2",number:"1",children:"Set a name"}),(0,r.jsx)(C,{children:"Your node name should be short and meaningful."}),(0,r.jsxs)(c.Jy,{children:[(0,r.jsx)(y.Z,{plain:!0,my:"bottom-left",at:"bottom-right",vAlign:"top",tooltipContent:(0,r.jsx)(Z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"tp-body2 fs-18",children:"Name"}),(0,r.jsx)("div",{className:"tp-body1 fs-18",children:"Blabla"})]})}),children:(0,r.jsx)(c.lX,{label:"Node name",error:e.fieldState.error,required:!0})}),(0,r.jsx)(c.oi,{...e.field,...e.fieldState,required:!0,placeholder:"Give it a name"}),(0,r.jsx)(I,{children:"You can change this later if you want, even add a picture and desctiption."})]})]}),(0,r.jsxs)(P,{children:[(0,r.jsx)(c.NP,{as:"h2",number:"2",children:"Set address"}),(0,r.jsx)(E,{children:"Lorem ipsum dolor sit amet consectetur. Nibh metus posuere sed ultrices consectetur. Id sem facilisis et aliquet a."}),(0,r.jsxs)(c.Jy,{children:[(0,r.jsx)(y.Z,{plain:!0,my:"bottom-left",at:"bottom-right",vAlign:"top",tooltipContent:(0,r.jsx)(k,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"tp-body2 fs-18",children:"Address"}),(0,r.jsx)("div",{className:"tp-body1 fs-18",children:"Blabla"})]})}),children:(0,r.jsx)(c.lX,{label:"Set address",error:t.fieldState.error})}),(0,r.jsx)(c.oi,{...t.field,...t.fieldState,placeholder:"https://my-domain.tld/"}),(0,r.jsx)(B,{children:(0,r.jsx)(_.Z,{href:"https://docs.aleph.im/nodes/compute/",size:"regular",children:"How to install your node and retrieve your address"})})]})]}),(0,r.jsxs)(z,{children:[(0,r.jsx)(c.zx,{color:"main0",kind:"neon",variant:"primary",size:"regular",type:"submit",children:"Register compute node"}),(0,r.jsx)(v.Z,{size:"regular",href:"/earn/crn",children:"Cancel"})]})]})]})};j.displayName="NewComputeResourceNodePage";var w=(0,o.memo)(j),b=(0,i.ZP)("h1").withConfig({displayName:"cmp___StyledH",componentId:"sc-lx7b9a-0"})({marginBottom:"2rem"}),N=(0,i.ZP)(l.Z).withConfig({displayName:"cmp___StyledForm",componentId:"sc-lx7b9a-1"})({maxWidth:"44.6875rem"}),S=(0,i.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-lx7b9a-2"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem","@media (min-width: 768px)":{paddingBottom:"2.5rem"}}),C=(0,i.ZP)("p").withConfig({displayName:"cmp___StyledP",componentId:"sc-lx7b9a-3"})({marginBottom:"1.5rem",marginTop:"0.25rem"}),Z=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-lx7b9a-4"})({textAlign:"left"}),I=(0,i.ZP)("p").withConfig({displayName:"cmp___StyledP2",componentId:"sc-lx7b9a-5"})({marginTop:"1rem"}),P=(0,i.ZP)("section").withConfig({displayName:"cmp___StyledSection2",componentId:"sc-lx7b9a-6"})({paddingLeft:"0px",paddingRight:"0px",paddingTop:"1.5rem",paddingBottom:"1.5rem","@media (min-width: 768px)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),E=(0,i.ZP)("p").withConfig({displayName:"cmp___StyledP3",componentId:"sc-lx7b9a-7"})({marginBottom:"1.5rem",marginTop:"0.25rem"}),k=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-lx7b9a-8"})({textAlign:"left"}),B=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-lx7b9a-9"})({marginTop:"0.5rem"}),z=(0,i.ZP)("section").withConfig({displayName:"cmp___StyledSection3",componentId:"sc-lx7b9a-10"})({display:"flex",gap:"2.5rem"}),R=w}},function(e){e.O(0,[538,774,888,179],function(){return e(e.s=32502)}),_N_E=e.O()}]);