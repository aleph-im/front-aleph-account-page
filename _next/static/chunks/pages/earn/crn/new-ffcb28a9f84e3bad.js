(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{32502:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/earn/crn/new",function(){return t(42389)}])},87931:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(85893),a=t(41664),i=t.n(a),o=t(7251);function s(e){let{href:n,variant:t,color:a,kind:s,size:c,children:d}=e;return(0,r.jsx)(i(),{href:n,passHref:!0,legacyBehavior:!0,children:(0,r.jsx)(o.zx,{as:"a",variant:t||"secondary",color:a||"main0",kind:s||"neon",size:c||"regular",children:d})})}},58833:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(85893),a=t(19521),i=t(7251);let o=(0,a.ZP)(i.zx).attrs(e=>({...e,forwardedAs:"a",kind:"neon",variant:"text-only",color:"main0"})).withConfig({displayName:"styles__StyledExternalLinkButton",componentId:"sc-16jaolm-0"})([""]);function s(e){let{children:n,href:t,size:a="big",...i}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(o,{href:t,size:a,...i,target:"_blank",children:[n||t,(0,r.jsx)(c,{name:"square-up-right"})]})})}var c=(0,a.ZP)(i.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-mpznlq-0"})({marginLeft:"0.625rem"})},43291:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var r=t(85893),a=t(67294),i=t(19521);let o=i.ZP.form.withConfig({displayName:"styles__StyledForm",componentId:"sc-1c33mus-0"})(["",""],{display:"flex",flex:"1 1 0%",flexDirection:"column",gap:"2rem"});var s=t(7251);let c=e=>{let{children:n,onSubmit:t,errors:a,...i}=e;return(0,r.jsxs)(o,{onSubmit:t,noValidate:!0,...i,children:[n,(0,r.jsx)("div",{children:(null==a?void 0:a.root)&&Object.values(a.root).map(e=>(0,r.jsx)(s.Xq,{error:e},e+""))})]})};var d=(0,a.memo)(c)},78512:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(67294),a=t(11163),i=t(94461);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",[n]=(0,i.mr)(),t=(0,a.useRouter)();(0,r.useEffect)(()=>{n.account||t.replace(e)})}},10159:function(e,n,t){"use strict";t.d(n,{c:function(){return s}});var r=t(7251),a=t(67294),i=t(87536),o=t(1604);function s(e){let{onSubmit:n,onSuccess:t,onError:s,readyDeps:c=[],...d}=e,l=(0,i.cI)(d);(0,a.useEffect)(()=>{"object"==typeof d.defaultValues&&l.reset(d.defaultValues)},c);let[m,u]=(0,a.useState)({data:void 0,error:void 0,loading:!1}),[p,{onLoad:h,onSuccess:f,onError:g}]=(0,r.g7)({flushData:!0,state:m,setState:u,onSuccess:t,onError:s}),x=(0,a.useCallback)(async e=>{try{h();let t=await n(e);f(t)}catch(n){let e=n instanceof o.jm?Error("Validation error, check highlighted form fields"):(null==n?void 0:n.cause)||n;l.setError("root.serverError",{...e,message:null==e?void 0:e.message}),g(e)}},[l,g,h,n,f]),y=(0,a.useCallback)(async e=>{let n;if(console.log(e),!n){let t=function e(n){let[t]=Object.entries(n);if(!t)return;let[r,a]=t;if(Array.isArray(a)){let n=a[a.length-1];return e(n)}return[r,a]}(e);if(t){let[e,r]=t,a="string"==typeof r?r:(null==r?void 0:r.message)?": ".concat(r.message):(null==r?void 0:r.type)?': "'.concat(null==r?void 0:r.type,'" validation not satisfied'):"";n=Error('Error on field "'.concat(e,'"').concat(a))}}n||(n=Error("Validation error")),g(n)},[g]),_=(0,a.useMemo)(()=>l.handleSubmit(x,y),[l,x,y]);return{...l,requestState:p,handleSubmit:_}}},42389:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return z}});var r=t(85893),a=t(19521),i=t(67294),o=t(9008),s=t.n(o),c=t(43291),d=t(7251),l=t(78512),m=t(94461),u=t(11163),p=t(10159),h=t(87536),f=t(56312),g=t(48107),x=t(91421);let y={name:"",address:""};var _=t(58833),w=t(87931);let v=()=>{let{nameCtrl:e,addressCtrl:n,errors:t,handleSubmit:a}=((0,l.Z)(),function(){let e=(0,u.useRouter)(),[n,t]=(0,m.mr)(),{account:r}=n.account,a=(0,d.lm)(),o=(0,i.useMemo)(()=>new g.B(r),[r]),s=(0,i.useCallback)(async e=>{if(!o)throw Error("Manager not ready");if(!r)throw Error("Invalid account");let n=await o.newComputeResourceNode(e),t=function(e,n,t){let r={hash:n,owner:t,manager:t,reward:t,locked:!1,authorized:[],parent:null,time:Date.now(),status:"waiting",score:0,score_updated:!1,decentralization:0,performance:0,type:"compute",...e,virtual:Date.now()};return r}(e,n,r.address);return t},[r,o]),c=(0,i.useCallback)(async n=>{if(!a)throw Error("Notification not ready");a.add({variant:"success",title:"Success",text:'Your node "'.concat(n.hash,'" was created successfully.')}),t(new x.Wy({name:"crns",entities:[n]})),e.replace("/earn/crn/".concat(n.hash))},[t,a,e]),{control:l,handleSubmit:_,formState:{errors:w}}=(0,p.c)({defaultValues:y,onSubmit:s,onSuccess:c,resolver:(0,f.F)(g.B.newCRNSchema)}),v=(0,h.qo)({control:l}),j=(0,h.bc)({control:l,name:"name"}),b=(0,h.bc)({control:l,name:"address"});return{values:v,control:l,nameCtrl:j,addressCtrl:b,errors:w,handleSubmit:_}}());return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"Aleph.im | Create CRN"}),(0,r.jsx)("meta",{name:"description",content:"Aleph.im Create Compute Resource Node"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,r.jsx)("section",{children:(0,r.jsx)(b,{className:"tp-h5",children:"Create compute resource node"})}),(0,r.jsxs)(N,{onSubmit:a,errors:t,children:[(0,r.jsxs)(S,{children:[(0,r.jsx)(d.NP,{as:"h2",number:"1",children:"Set a name"}),(0,r.jsx)(C,{children:"Your node name should be short and meaningful."}),(0,r.jsxs)(d.Jy,{children:[(0,r.jsx)(d.oi,{...e.field,...e.fieldState,required:!0,label:"Node name",placeholder:"Give it a name"}),(0,r.jsx)(P,{children:"You can change this later if you want, even add a picture and description."})]})]}),(0,r.jsxs)(Z,{children:[(0,r.jsx)(d.NP,{as:"h2",number:"2",children:"Set address"}),(0,r.jsx)(E,{children:"The physical node has a unique identifier address. It links the wallet and interface to the physical node. This address is mandatory to proceed and the install procedure below will explain how to retrieve this address."}),(0,r.jsxs)(d.Jy,{children:[(0,r.jsx)(d.oi,{...n.field,...n.fieldState,required:!0,label:"Set address",placeholder:"https://my-domain.tld/"}),(0,r.jsx)(k,{children:(0,r.jsx)(_.Z,{href:"https://docs.aleph.im/nodes/compute/",size:"regular",children:"How to install your node and retrieve your address"})})]})]}),(0,r.jsxs)(I,{children:[(0,r.jsx)(d.zx,{color:"main0",kind:"neon",variant:"primary",size:"regular",type:"submit",children:"Register compute node"}),(0,r.jsx)(w.Z,{size:"regular",variant:"text-only",href:"/earn/crn",children:"Cancel"})]})]})]})};v.displayName="NewComputeResourceNodePage";var j=(0,i.memo)(v),b=(0,a.ZP)("h1").withConfig({displayName:"cmp___StyledH",componentId:"sc-lx7b9a-0"})({marginBottom:"2rem"}),N=(0,a.ZP)(c.Z).withConfig({displayName:"cmp___StyledForm",componentId:"sc-lx7b9a-1"})({maxWidth:"44.6875rem"}),S=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-lx7b9a-2"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem","@media (min-width: 768px)":{paddingBottom:"2.5rem"}}),C=(0,a.ZP)("p").withConfig({displayName:"cmp___StyledP",componentId:"sc-lx7b9a-3"})({marginBottom:"1.5rem",marginTop:"0.25rem"}),P=(0,a.ZP)("p").withConfig({displayName:"cmp___StyledP2",componentId:"sc-lx7b9a-4"})({marginTop:"1rem"}),Z=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection2",componentId:"sc-lx7b9a-5"})({paddingLeft:"0px",paddingRight:"0px",paddingTop:"1.5rem",paddingBottom:"1.5rem","@media (min-width: 768px)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),E=(0,a.ZP)("p").withConfig({displayName:"cmp___StyledP3",componentId:"sc-lx7b9a-6"})({marginBottom:"1.5rem",marginTop:"0.25rem"}),k=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-lx7b9a-7"})({marginTop:"0.5rem"}),I=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection3",componentId:"sc-lx7b9a-8"})({display:"flex",gap:"2.5rem"}),z=j},9008:function(e,n,t){e.exports=t(42636)}},function(e){e.O(0,[312,774,888,179],function(){return e(e.s=32502)}),_N_E=e.O()}]);