(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[265],{70805:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/earn/crn/[hash]",function(){return i(97172)}])},33378:function(e,n,i){"use strict";i.d(n,{Z:function(){return d}});var a=i(85893),t=i(19521),r=i(67294);let l=t.ZP.div.withConfig({displayName:"styles__StyledDotIcon",componentId:"sc-1w2vi58-0"})(e=>{let{theme:n,$active:i}=e,a=i?n.color.main1:"".concat(n.color.base0,"20");return[{height:"0.75rem",width:"0.5rem"},(0,t.iv)(["background-color:",";"],a)]}),s=(0,r.memo)(e=>{let{decentralization:n}=e,i=e=>(e+1)*.3;return(0,a.jsx)(o,{children:(0,a.jsx)(c,{children:Array.from({length:3},(e,t)=>(0,a.jsx)(l,{$active:n>=i(t)},t))})})});s.displayName="NodeDecentralization";var d=s,o=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-sktw9k-0"})({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),c=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-sktw9k-1"})({display:"flex",alignItems:"stretch",gap:"0.125rem"})},58193:function(e,n,i){"use strict";i.d(n,{h:function(){return l}});var a=i(94461),t=i(67294),r=i(69797);function l(e){let{nodes:n}=e,[i]=(0,a.mr)(),{entities:l}=i.ccns,{userNodes:s}=(0,r.M)({nodes:n||l}),d=(0,t.useMemo)(()=>null==s?void 0:s[0],[s]);return{userNode:d}}},97172:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return B}});var a=i(85893),t=i(19521),r=i(67294),l=i(9008),s=i.n(l),d=i(1218),o=i(94461),c=i(48107),u=i(11163),m=i(94527),h=i(15457),p=i(58193),v=i(10159),x=i(87536),j=i(56312),f=i(7251),C=i(91077),g=i(39229),N=i(68732),_=i(34853),y=i(8978),w=i(41664),k=i.n(w),E=i(71806),b=i(33378),S=i(46445),D=i(77849);let I=()=>{var e,n,i;let{node:t,nodesOnSameASN:l,baseLatency:w,lastMetricsCheck:E,calculatedRewards:I,isUserLinked:R,isLinkable:B,creationDate:U,nameCtrl:W,descriptionCtrl:V,bannerCtrl:J,pictureCtrl:Y,isOwner:q,isDirty:G,rewardCtrl:K,addressCtrl:X,handleRemove:$,handleSubmit:Q,handleLink:ee,handleUnlink:en}=function(){let e=(0,u.useRouter)(),{hash:n}=e.query,[i]=(0,o.mr)(),{account:a}=i.account,{entities:t}=i.crns,{node:l}=function(e){let{hash:n}=e,[i]=(0,o.mr)(),{entities:a}=i.crns,t=(0,r.useMemo)(()=>{if(a)return a.filter(e=>e.hash===n)},[a,n]),[l]=t||[];return{node:l}}({hash:n}),{userNode:s}=(0,p.h)({}),d=(0,r.useMemo)(()=>new c.B(a),[a]);d.isUserLinked;let{calculatedRewards:C}=(0,m.Ht)({address:(null==l?void 0:l.reward)||""}),g=(0,h._)({node:l,nodes:t}),N=(0,r.useMemo)(()=>{if(l)return d.isUserLinked(l,s)},[l,d,s]),_=(0,r.useMemo)(()=>{if(l)return d.isLinkable(l,s)[0]},[l,d,s]),y=(0,r.useCallback)(async()=>{if(!l||d.isUserLinked(l,s))return;let{hash:e}=l;await d.linkComputeResourceNode(e)},[l,d,s]),w=(0,r.useCallback)(async()=>{if(!l||!d.isUserLinked(l,s))return;let{hash:e}=l;await d.unlinkComputeResourceNode(e)},[l,d,s]),k=function(e){let{defaultValues:n}=e,i=(0,u.useRouter)(),[a]=(0,o.mr)(),{account:t}=a.account,l=(0,f.lm)(),s=(0,r.useMemo)(()=>new c.B(t),[t]),d=(0,r.useCallback)(async e=>{if(!s)throw Error("Manager not ready");let n=await s.updateComputeResourceNode(e);return n},[s]),m=(0,r.useCallback)(async e=>{if(!l)throw Error("Notification not ready");l.add({variant:"success",title:"Success",text:'Your node "'.concat(e,'" was updated successfully.')}),i.replace("/earn/crn/".concat(e))},[l,i]),{control:h,handleSubmit:p,formState:{errors:C,isDirty:g}}=(0,v.c)({defaultValues:n,onSubmit:d,onSuccess:m,resolver:(0,j.F)(c.B.updateCCNSchema),readyDeps:[null==n?void 0:n.hash]}),N=(0,x.qo)({control:h}),_=(0,x.bc)({control:h,name:"name"}),y=(0,x.bc)({control:h,name:"description"}),w=(0,x.bc)({control:h,name:"address"}),k=(0,x.bc)({control:h,name:"picture"}),E=(0,x.bc)({control:h,name:"banner"}),b=(0,x.bc)({control:h,name:"reward"}),S=(0,x.bc)({control:h,name:"manager"}),D=(0,x.bc)({control:h,name:"authorized"}),I=(0,x.bc)({control:h,name:"locked"}),R=(0,x.bc)({control:h,name:"registration_url"});return{values:N,control:h,nameCtrl:_,descriptionCtrl:y,addressCtrl:w,pictureCtrl:k,bannerCtrl:E,rewardCtrl:b,managerCtrl:S,authorizedCtrl:D,lockedCtrl:I,registrationUrlCtrl:R,errors:C,isDirty:g,handleSubmit:p}}({defaultValues:{hash:null==l?void 0:l.hash,name:null==l?void 0:l.name,description:null==l?void 0:l.description,reward:null==l?void 0:l.reward,authorized:null==l?void 0:l.authorized,locked:null==l?void 0:l.locked,registration_url:null==l?void 0:l.registration_url,manager:null==l?void 0:l.manager,picture:null==l?void 0:l.picture,banner:null==l?void 0:l.banner,address:null==l?void 0:l.address}});return{nodes:t,node:l,userNode:s,calculatedRewards:C,isUserLinked:N,isLinkable:_,handleLink:y,handleUnlink:w,...k,...g}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s(),{children:[(0,a.jsx)("title",{children:"Aleph.im | CRN Detail"}),(0,a.jsx)("meta",{name:"description",content:"Aleph.im Compute Resource Node"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,a.jsx)("section",{children:(0,a.jsx)(d.Z,{node:t,nameCtrl:W,descriptionCtrl:V,bannerCtrl:J,pictureCtrl:Y,isOwner:q})}),q&&(0,a.jsxs)(Z,{children:[(0,a.jsxs)(f.zx,{kind:"flat",variant:"text-only",size:"regular",color:"error",onClick:$,children:[(0,a.jsx)(f.JO,{name:"trash",color:"error",size:"lg"}),"remove node"]}),(0,a.jsx)(f.zx,{kind:"neon",variant:"primary",size:"regular",color:"main2",onClick:Q,disabled:!G,children:"save changes"})]}),(0,a.jsx)(A,{children:(0,a.jsxs)(N.Z,{children:[(0,a.jsx)("div",{children:(0,a.jsxs)(C.Z,{title:"GENERAL INFO",children:[(0,a.jsx)(y.Z,{status:null==t?void 0:t.status}),(0,a.jsx)(g.HC,{name:"NAME",value:null==t?void 0:t.name}),(0,a.jsx)(g.HC,{name:"OWNER",value:(0,a.jsx)(k(),{href:(0,_.tz)({address:null==t?void 0:t.owner}),target:"_blank",children:(0,_.zN)((null==t?void 0:t.owner)||"")}),big:!0}),(0,a.jsx)(g.HC,{name:"REWARD ADDRESS",value:(0,a.jsx)(D.Z,{...K.field,...K.fieldState,placeholder:"address",isOwner:q,children:(0,a.jsx)(k(),{href:(0,_.tz)({tokenAddress:K.field.value}),target:"_blank",children:(0,_.zN)(K.field.value||"NONE")})}),big:!0}),(0,a.jsx)(g.HC,{name:"ADDRESS",value:(0,a.jsx)(D.Z,{...X.field,...X.fieldState,placeholder:"address",isOwner:q,children:(0,a.jsx)(k(),{href:(null==t?void 0:t.address)||"#",target:"_blank",children:null==t?void 0:t.address})}),big:!0})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(C.Z,{title:"REWARD INDICATORS",children:[(0,a.jsx)(g.HC,{name:"ASN",value:null==t?void 0:null===(e=t.metricsData)||void 0===e?void 0:e.as_name}),(0,a.jsx)(g.HC,{name:"NODES ON ASN",value:l}),(0,a.jsx)(g.HC,{name:"VERSION",value:null==t?void 0:null===(n=t.metricsData)||void 0===n?void 0:n.version}),(0,a.jsx)(g.HC,{name:"BASE LATENCY",value:w}),(0,a.jsx)(g.HC,{name:"LAST CHECK",value:E})]}),(0,a.jsx)(C.Z,{title:"POTENTIAL REWARD",children:(0,a.jsx)(g.HC,{name:"ESTIMATED MONTHLY REWARD",value:(0,a.jsxs)(O,{children:[(0,a.jsx)(P,{children:null==I?void 0:I.toFixed(5)}),(0,a.jsx)(f.TR,{text:"",color:"main0"})]})})})]}),(0,a.jsx)("div",{children:(0,a.jsx)(C.Z,{title:"LINKED CORE NODE",children:(null==t?void 0:t.parentData)?(0,a.jsxs)(L,{children:[(0,a.jsx)(k(),{href:"/earn/ccn/".concat(t.parentData.hash),legacyBehavior:!0,children:(0,a.jsx)(F,{hash:t.parentData.hash,name:t.parentData.name,picture:t.parentData.picture})}),R?(0,a.jsx)("button",{onClick:en,children:(0,a.jsx)(f.JO,{name:"trash",color:"error"})}):(0,a.jsx)(a.Fragment,{})]}):(0,a.jsxs)(H,{children:[(0,a.jsx)(T,{}),(0,a.jsx)(z,{className:"fs-10",children:!R&&B?(0,a.jsx)(f.zx,{color:"main2",size:"regular",kind:"neon",variant:"text-only",onClick:ee,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(M,{name:"link"})," link now"]})}):(0,a.jsx)(a.Fragment,{children:"not linked"})})]})})}),(0,a.jsx)("div",{children:(0,a.jsx)(C.Z,{title:"DECENTRALIZED SCORE",children:(0,a.jsx)(b.Z,{decentralization:(null==t?void 0:null===(i=t.scoreData)||void 0===i?void 0:i.decentralization)||0})})}),(0,a.jsx)("div",{children:(0,a.jsxs)(C.Z,{title:"PERFORMANCE",children:[(0,a.jsx)(g.HC,{name:"AVERAGE RESPONSE",value:"?????"}),(0,a.jsx)(g.HC,{name:"RESPONSIVENESS",value:"?????"}),(0,a.jsx)(g.HC,{name:"TIME LEFT",value:"?????"}),(0,a.jsx)(g.HC,{name:"UPTIME",value:"?????"}),(0,a.jsx)(g.HC,{name:"CREATION TIME",value:U})]})})]})}),(0,a.jsx)(S.Z,{show:!t,center:!0})]})};I.displayName="ComputeResourceNodeDetailPage";var R=(0,r.memo)(I),Z=(0,t.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-b9jk28-0"})({marginTop:"2rem",marginBottom:"2rem",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"1.75rem"}),A=(0,t.ZP)("section").withConfig({displayName:"cmp___StyledSection2",componentId:"sc-b9jk28-1"})({marginTop:"2rem"}),O=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-b9jk28-2"})({display:"inline-flex",alignItems:"center",gap:"0.5rem"}),P=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-b9jk28-3"})({whiteSpace:"nowrap"}),H=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-b9jk28-4"})({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),T=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-b9jk28-5"})({height:"1.5rem",width:"1.5rem",borderRadius:"9999px",backgroundColor:"#C4C4C433"}),z=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-b9jk28-6"})({lineHeight:"1rem"}),M=(0,t.ZP)(f.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-b9jk28-7"})({height:"0.875rem",width:"0.875rem"}),L=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-b9jk28-8"})({display:"flex",alignItems:"center"}),F=(0,t.ZP)(E.Z).withConfig({displayName:"cmp___StyledNodeName",componentId:"sc-b9jk28-9"})({marginRight:"auto",width:"auto",cursor:"pointer"}),B=R}},function(e){e.O(0,[959,312,2,990,774,888,179],function(){return e(e.s=70805)}),_N_E=e.O()}]);